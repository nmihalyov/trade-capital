function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}window.onload=function(){var t=0;new WOW({boxClass:"js-wow"}).init();function e(e){e<1200?$('meta[name="viewport"]').attr("content","width=320"):$('meta[name="viewport"]').attr("content","width=device-width, initial-scale=1, user-scalable=no")}e($(window).innerWidth()),$(window).resize(function(){e($(window).innerWidth())}),1200<=window.innerWidth&&(particlesJS.load("why-particles","js/particles.json"),particlesJS.load("demo-particles","js/particles.json")),particlesJS.load("faq-particles","js/particles.json"),$(".js-play-video").on("click",function(){var e=$(this).attr("data-id");$(this).parent().hasClass("video--local")?$(this).parent().find("video").trigger("play"):$(this).parent().append('<iframe width="570" height="285" src="https://www.youtube.com/embed/'+e+'?autoplay=1" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen)>'),$(this).hide()}),$(document).ready(function(){var e=$(".video--local").attr("data-url");$(".video--local").append('<video width="570" height="285" controls="" class="embed-responsive-item" data-mp4="true" id="mautic-player-0">\n    <source src='+e+' type="video/mp4">\n  </video>')}),$(".input__field").on("focus",function(){$(this).parent().addClass("input--focused")}).on("blur",function(){$(this).parent().removeClass("input--focused")}),$(".input__field").on("change",function(){""!==$(this).val()?$(this).parent().addClass("input--filled"):$(this).parent().removeClass("input--filled")}),$(".input--tel .input__field").inputmask("8 999 999 99 99"),$(".input--tel .input__field").on("input",function(){var e=$(this).val();""===e||/_/g.test(e)?$(this).siblings(".js-send-tel").attr("disabled","disabled"):$(this).siblings(".js-send-tel").removeAttr("disabled")}),$(".input--code .input__field").inputmask("9999");function i(){o.map(function(e){e.offset().top<=window.scrollY+$(".header").innerHeight()+30&&($(".header__link--current").removeClass("header__link--current"),$(".header__link[data-scroll="+e[0].classList[0]+"]").addClass("header__link--current"))})}function a(){window.scrollY<50?$(".header").removeClass("header--bg"):$(".header").addClass("header--bg")}var o=[$(".page-wrapper"),$(".why"),$(".about"),$(".faq")];i();var n,l=(n=0,function(e,t){clearTimeout(n),n=setTimeout(e,t)});$(window).on("scroll",function(){l(i,300),a()});var r=!1;$(".js-scrollto").on("click",function(e){e.preventDefault(),$("body").css({position:"static","margin-top":"0"}),r=!1,$(".header__burger").removeClass("header__burger--active"),$(".header__mobile").removeClass("header__mobile--active"),$([document.documentElement,document.body]).animate({scrollTop:$("."+$(this).attr("data-scroll")).offset().top-$(".header").innerHeight()},500)}),$(".header__burger").on("click",function(){$(this).toggleClass("header__burger--active"),$(".header__mobile").toggleClass("header__mobile--active"),(r=!r)?(t=window.scrollY,$("body").css({position:"fixed","margin-top":-t})):($("body").css({position:"static","margin-top":"0"}),window.scrollTo(0,t))});a(),1200<=window.innerWidth&&$(window).on("scroll",function(){window.scrollY<window.innerHeight&&$(".hero").css("transform","translateY("+-window.scrollY/5+"px)")}),$(".js-scroll-calc").on("click",function(e){e.preventDefault(),$([document.documentElement,document.body]).animate({scrollTop:$(".calc").offset().top-$(".header").innerHeight()-30},500)}),$(".hero__play").on("click",function(){t=window.scrollY,$("body").css({position:"fixed","margin-top":-t}),$(".hero-popup__window").append('<iframe width="100%" height="100%" src="https://www.youtube.com/embed/ovUMVVgMaDU?autoplay=1" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen)>'),$(".hero-popup").fadeIn(300)}),$(".hero-popup__close").on("click",function(){$("body").css({position:"static","margin-top":"0"}),window.scrollTo(0,t),$(".hero-popup").fadeOut(300),$(".hero-popup iframe").remove()});function s(e,t,i,a,o){var n=4<arguments.length&&void 0!==o&&o,l=t,r=i-t,s=r/a,c=Math.abs(Math.floor(a/r)),d=setInterval(function(){l+=s,$(e).text(n?"0,"+Math.floor(l).toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")+"%":Math.floor(l).toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")),Math.floor(l)==i&&clearInterval(d)},c)}var c=!1,d=!1;$(window).on("scroll",function(){var e=$(".calc__chart").offset().top,t=window.scrollY+window.innerHeight;if(e<=t&&window.scrollY-window.innerHeight/1.5<=e+window.innerHeight/1.5){var i=t-(e+window.innerHeight/1.5);$(".calc__chart").css("width",(i<=100?i:100)+"vw")}!c&&t-50>=$(".calculator__total span").offset().top&&(s(".calculator__total span",1e5,0,22),c=!0),!d&&t-50>=$(".calc__stats-col").offset().top&&(s(".calc__stats-col:nth-child(1) .calc__stats-head",0,33,33,!0),s(".calc__stats-col:nth-child(2) .calc__stats-head",0,1789,20),s(".calc__stats-col:nth-child(3) .calc__stats-head",0,1165,20),d=!0)}),new AutoNumeric('.calculator__input [name="deposit"]',{aSep:" ",decimalPlaces:0}),new AutoNumeric('.calculator__input [name="term"]',{aSep:" ",decimalPlaces:0});function p(){var e=parseInt(u*(h/100)*30*_+u);$(".calculator__total span").text(e.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "))}var u=0,_=0,h=2.5;if($(".calculator__input input").on("input",function(){"deposit"===$(this).attr("name")&&(u=+$(this).val().replace(/ /g,"")),"term"===$(this).attr("name")&&(_=+$(this).val().replace(/ /g,"")),p()}),$(".js-range").ionRangeSlider({type:"single",max:5,min:0,from:2.5,step:.1,onChange:function(e){var t=e.input[0].value;h=+t,p(),$(".irs-single").show(),$(".calculator__grid-item").map(function(e){+e<=+t?$(".calculator__grid-item:eq("+e+")").addClass("calculator__grid-item--check"):$(".calculator__grid-item:eq("+e+")").removeClass("calculator__grid-item--check")})},onFinish:function(){$(".irs-single").hide()}}),$(window).innerWidth()<1200)new Swiper(".feedback__grid",{direction:"horizontal",speed:500,wrapperClass:"feedback__row",slideClass:"feedback__video",spaceBetween:30,loop:!0,pagination:{el:".feedback__pagination",clickable:!0}});if($(window).innerWidth()<1200){var w;new Swiper(".slider__container",(_defineProperty(w={direction:"horizontal",speed:500,wrapperClass:"slider__wrapper",slideClass:"slider__slide",spaceBetween:30,loop:!0},"spaceBetween",30),_defineProperty(w,"pagination",{el:".slider__pagination",clickable:!0}),w))}else new Swiper(".slider__container",{direction:"vertical",speed:500,wrapperClass:"slider__wrapper",slideClass:"slider__slide",spaceBetween:30,loop:!0,autoplay:{delay:3e3,disableOnInteraction:!1},pagination:{el:".slider__pagination",clickable:!0}});$(".faq-item__head").on("click",function(){$(this).hasClass("faq-item__head--opened")?$(this).removeClass("faq-item__head--opened"):($(".faq-item__head--opened").next().slideUp(300),$(".faq-item__head--opened").removeClass("faq-item__head--opened"),$(this).addClass("faq-item__head--opened")),$(this).next().slideToggle(300)}),$(".js-open-popup").on("click",function(e){e.preventDefault(),t=window.scrollY,$("body").css({position:"fixed","margin-top":-t}),$(".popup").fadeIn(300)}),$(".popup__close").on("click",function(){$("body").css({position:"static","margin-top":"0"}),window.scrollTo(0,t),$(".popup").fadeOut(300)}),$(".js-send-tel").on("click",function(e){e.preventDefault(),$(this).attr("disabled","disabled"),$(this).siblings(".input__field").attr("disabled","disabled"),$(".popup__code input").removeAttr("disabled"),$(".js-send-form").removeAttr("disabled")})};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1vbi5qcyJdLCJuYW1lcyI6WyJ3aW5kb3ciLCJvbmxvYWQiLCJzY3JvbGwiLCJXT1ciLCJib3hDbGFzcyIsImluaXQiLCJ3aWR0aCIsIiQiLCJzZXRSZXNwb25zaXZlIiwiYXR0ciIsImlubmVyV2lkdGgiLCJyZXNpemUiLCJwYXJ0aWNsZXNKUyIsImxvYWQiLCJvbiIsIklEIiwidGhpcyIsInBhcmVudCIsInRyaWdnZXIiLCJhcHBlbmQiLCJoaWRlIiwiZG9jdW1lbnQiLCJyZWFkeSIsIlVSTCIsImFkZENsYXNzIiwicmVtb3ZlQ2xhc3MiLCJ2YWwiLCJpbnB1dG1hc2siLCJ0ZXN0Iiwic2libGluZ3MiLCJyZW1vdmVBdHRyIiwic2V0TGlua3MiLCJzZWN0aW9ucyIsIm1hcCIsImVsIiwib2Zmc2V0IiwidG9wIiwidG9wT2Zmc2V0IiwiaW5uZXJIZWlnaHQiLCJjbGFzc0xpc3QiLCJzZXRIZWFkZXIiLCJ0aW1lciIsImRlYm91bmNlIiwiY2FsbGJhY2siLCJjbGVhclRpbWVvdXQiLCJzZXRUaW1lb3V0IiwibXMiLCJoZWFkZXJNb2JpbGVTaG93biIsImUiLCJwcmV2ZW50RGVmYXVsdCIsImNzcyIsInBvc2l0aW9uIiwibWFyZ2luLXRvcCIsInNjcm9sbFRvcCIsImJvZHkiLCJhbmltYXRlIiwidG9nZ2xlQ2xhc3MiLCJzY3JvbGxZIiwic2Nyb2xsVG8iLCJzZXRIZXJvIiwiZmFkZUluIiwiZmFkZU91dCIsInJlbW92ZSIsImFuaW1hdGVWYWx1ZSIsInNlbGVjdG9yIiwic3RhcnQiLCJlbmQiLCJkdXJhdGlvbiIsInBlcmNlbnQiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJjdXJyZW50IiwicmFuZ2UiLCJpbmNyZW1lbnQiLCJmbG9vciIsInN0ZXBUaW1lIiwiTWF0aCIsInNldEludGVydmFsIiwidG9TdHJpbmciLCJyZXBsYWNlIiwidGV4dCIsImRlcG9zaXRJc0FuaW1hdGVkIiwic3RhdHNBcmVBbmltYXRlZCIsImNoYXJ0VG9wIiwic2Nyb2xsV2l0aFdpbmRvdyIsIkF1dG9OdW1lcmljIiwiYVNlcCIsImNhbGN1bGF0ZSIsImRlcG9zaXQiLCJwcm9maXQiLCJ0ZXJtIiwiaW9uUmFuZ2VTbGlkZXIiLCJ0eXBlIiwibWF4IiwibWluIiwiZnJvbSIsInN0ZXAiLCJkYXRhIiwib25DaGFuZ2UiLCJpbnB1dCIsInZhbHVlIiwic2hvdyIsIm9uRmluaXNoIiwiU3dpcGVyIiwiZGlyZWN0aW9uIiwiZmVlZGJhY2tTbGlkZXIiLCJzcGVlZCIsIndyYXBwZXJDbGFzcyIsInNsaWRlQ2xhc3MiLCJzcGFjZUJldHdlZW4iLCJsb29wIiwicGFnaW5hdGlvbiIsIl9yZWYiLCJjbGlja2FibGUiLCJzbGlkZXIiLCJhdXRvcGxheSIsImRlbGF5IiwiaGFzQ2xhc3MiLCJuZXh0Iiwic2xpZGVVcCIsInNsaWRlVG9nZ2xlIl0sIm1hcHBpbmdzIjoic0lBQUFBLE9BQU9DLE9BQVMsV0FBaEJELElBQUFBLEVBQUEsRUFFTUUsSUFBWUMsSUFBQSxDQUdoQkMsU0FBVSxXQURWQyxPQUlGLFNBQUlBLEVBQUpDLEdBQ0VBLEVBQUEsS0FDRkMsRUFBTUMseUJBQUFBLEtBQUFBLFVBQWdCLGFBRWxCRCxFQUFBQSx5QkFBQUUsS0FBMkJBLFVBQTNCLHlEQU9KRCxFQUFjRCxFQUFFUCxRQUFRVSxjQUd4QkgsRUFBRVAsUUFBUVcsT0FBTyxXQURqQkgsRUFBQUQsRUFBQVAsUUFBQVUsZ0JBQ0EsTUFBQVYsT0FBQVUsYUFHRUUsWUFBQUMsS0FBQSxnQkFBQSxxQkFDRkQsWUFBV0YsS0FBQUEsaUJBQW9CLHNCQUU3QkUsWUFBQUEsS0FBWUMsZ0JBQUsscUJBS25CTixFQUFFLGtCQUFrQk8sR0FBRyxRQUFTLFdBRDlCLElBQUFDLEVBQUFSLEVBQUFTLE1BQUFQLEtBQUEsV0FDQUYsRUFBQVMsTUFBQUMsU0FBa0JILFNBQXBCLGdCQUNFUCxFQUFBUyxNQUFNRCxTQUFhTixLQUFLLFNBQWJTLFFBQVgsUUFFRVgsRUFBQUEsTUFBQVUsU0FBQUUsT0FBQVosdUVBQUFRLEVB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QSxzQkFDRTlFLFdBQUksS0FLUjNCLEVBQUEsbUJBQUFPLEdBQUEsUUFBQSxXQUNBUCxFQUFBUyxNQUFBc0csU0FBbUJ4RywwQkFDbkJQLEVBQUFTLE1BQU1TLFlBQUYsMkJBRUhsQixFQUZELDJCQUVPZ0gsT0FBQUMsUUFBQSxLQUNMakgsRUFBQUEsMkJBQUFrQixZQUFvQytGLDBCQUNwQ2pILEVBQUFBLE1BQUVpQixTQUFBLDJCQUVIakIsRUFBQVMsTUFBQXVHLE9BQUFFLFlBQUEsT0FHRGxILEVBQUEsa0JBQUFPLEdBQUEsUUFBQSxTQUFBa0MsR0FDRnpDLEVBQUUwQyxpQkFHQS9DLEVBQVNGLE9BQU95RCxRQUVoQmxELEVBQUUsUUFBUTJDLElBQUksQ0FBZDNDLFNBQVUyQyxRQUNSRSxjQUFZbEQsSUFJZEssRUFBRSxVQUFVcUQsT0FBTyxPQUdyQnJELEVBQUEsaUJBQUFPLEdBQUEsUUFBQSxXQUNBUCxFQUFFLFFBQUEyQyxJQUFBLENBQ0EzQyxTQUFVMkMsU0FDUkUsYUFBWSxNQUlkcEQsT0FBTzBELFNBQVMsRUFBR3hELEdBRW5CSyxFQUFFLFVBQVVzRCxRQUFRLE9BR3RCdEQsRUFBQSxnQkFBQU8sR0FBQSxRQUFBLFNBQUFrQyxHQUNBekMsRUFBRTBDLGlCQUdBMUMsRUFBRVMsTUFBTVAsS0FBSyxXQUFZLFlBQXpCRixFQUFBQSxNQUFBc0IsU0FBYSxpQkFBWXBCLEtBQXpCLFdBQUEsWUFDQUYsRUFBQUEsc0JBQWlCdUIsV0FBakIsWUFDQXZCLEVBQUFBLGlCQUFFdUIsV0FBc0JBIiwiZmlsZSI6ImNvbW1vbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJ3aW5kb3cub25sb2FkID0gKCkgPT4ge1xuXG4gIGxldCBzY3JvbGwgPSAwOyAvLyBoZWFkZXIsIGhlcm8sIHBvcHVwXG5cbiAgY29uc3Qgd293ID0gbmV3IFdPVyh7XG4gIGJveENsYXNzOiAnanMtd293J1xufSk7XG5cbndvdy5pbml0KCk7XG4gIC8vIHNldHRpbmcgdmlld3BvcnQgbWV0YSB0YWdcbmNvbnN0IHNldFJlc3BvbnNpdmUgPSB3aWR0aCA9PiB7XG4gIGlmICh3aWR0aCA8IDEyMDApIHtcbiAgICAkKCdtZXRhW25hbWU9XCJ2aWV3cG9ydFwiXScpLmF0dHIoJ2NvbnRlbnQnLCAnd2lkdGg9MzIwJyk7XG4gIH0gZWxzZSB7XG4gICAgJCgnbWV0YVtuYW1lPVwidmlld3BvcnRcIl0nKS5hdHRyKCdjb250ZW50JywgJ3dpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xLCB1c2VyLXNjYWxhYmxlPW5vJyk7XG4gIH1cbn07XG5cbi8vIHNldCBvbmNlIHBhZ2UgaXMgbG9hZGVkXG5zZXRSZXNwb25zaXZlKCQod2luZG93KS5pbm5lcldpZHRoKCkpO1xuXG4vLyBzZXQgb24gcmVzaXplXG4kKHdpbmRvdykucmVzaXplKCgpID0+IHtcbiAgc2V0UmVzcG9uc2l2ZSgkKHdpbmRvdykuaW5uZXJXaWR0aCgpKTtcbn0pO1xuICAvLyBsb2FkIHBhcnRpY2xlcyBkYXRhIGZvciBhbmltYXRlZCBzZWN0aW9uc1xuaWYgKHdpbmRvdy5pbm5lcldpZHRoID49IDEyMDApIHtcbiAgcGFydGljbGVzSlMubG9hZCgnd2h5LXBhcnRpY2xlcycsICdqcy9wYXJ0aWNsZXMuanNvbicpO1xuICBwYXJ0aWNsZXNKUy5sb2FkKCdkZW1vLXBhcnRpY2xlcycsICdqcy9wYXJ0aWNsZXMuanNvbicpO1xufVxucGFydGljbGVzSlMubG9hZCgnZmFxLXBhcnRpY2xlcycsICdqcy9wYXJ0aWNsZXMuanNvbicpO1xuXG4gIC8vIHNob3cgeW91dHViZSB2aWRlbyBwbGF5ZXJcbiQoJy5qcy1wbGF5LXZpZGVvJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICBjb25zdCBJRCA9ICQodGhpcykuYXR0cignZGF0YS1pZCcpXG4gIGlmICgkKHRoaXMpLnBhcmVudCgpLmhhc0NsYXNzKCd2aWRlby0tbG9jYWwnKSkge1xuICAgICQodGhpcykucGFyZW50KCkuZmluZCgndmlkZW8nKS50cmlnZ2VyKCdwbGF5Jyk7XG4gIH0gZWxzZSB7XG4gICAgJCh0aGlzKS5wYXJlbnQoKS5hcHBlbmQoYDxpZnJhbWUgd2lkdGg9XCI1NzBcIiBoZWlnaHQ9XCIyODVcIiBzcmM9XCJodHRwczovL3d3dy55b3V0dWJlLmNvbS9lbWJlZC8ke0lEfT9hdXRvcGxheT0xXCIgZnJhbWVib3JkZXI9XCIwXCIgYWxsb3c9XCJhY2NlbGVyb21ldGVyOyBhdXRvcGxheTsgZW5jcnlwdGVkLW1lZGlhOyBneXJvc2NvcGU7IHBpY3R1cmUtaW4tcGljdHVyZVwiIGFsbG93ZnVsbHNjcmVlbik+YCk7XG4gIH1cbiAgJCh0aGlzKS5oaWRlKCk7XG59KTtcblxuLy8gbG9hZCBsb2NhbCB2aWRlb1xuJChkb2N1bWVudCkucmVhZHkoKCkgPT4ge1xuICBjb25zdCBVUkwgPSAkKCcudmlkZW8tLWxvY2FsJykuYXR0cignZGF0YS11cmwnKTtcbiAgJCgnLnZpZGVvLS1sb2NhbCcpLmFwcGVuZChgPHZpZGVvIHdpZHRoPVwiNTcwXCIgaGVpZ2h0PVwiMjg1XCIgY29udHJvbHM9XCJcIiBjbGFzcz1cImVtYmVkLXJlc3BvbnNpdmUtaXRlbVwiIGRhdGEtbXA0PVwidHJ1ZVwiIGlkPVwibWF1dGljLXBsYXllci0wXCI+XG4gICAgPHNvdXJjZSBzcmM9JHtVUkx9IHR5cGU9XCJ2aWRlby9tcDRcIj5cbiAgPC92aWRlbz5gKTtcbn0pO1xuICAvLyBzZXQgaW5wdXQgZm9jdXMgc3R5bGVzXG4kKCcuaW5wdXRfX2ZpZWxkJykub24oJ2ZvY3VzJywgZnVuY3Rpb24gKCkge1xuICAkKHRoaXMpLnBhcmVudCgpLmFkZENsYXNzKCdpbnB1dC0tZm9jdXNlZCcpO1xufSkub24oJ2JsdXInLCBmdW5jdGlvbiAoKSB7XG4gICQodGhpcykucGFyZW50KCkucmVtb3ZlQ2xhc3MoJ2lucHV0LS1mb2N1c2VkJyk7XG59KTtcblxuLy8gc2V0IGlucHV0IGZpbGxlZCBzdHlsZXNcbiQoJy5pbnB1dF9fZmllbGQnKS5vbignY2hhbmdlJywgZnVuY3Rpb24gKCkge1xuICAkKHRoaXMpLnZhbCgpICE9PSAnJyA/ICQodGhpcykucGFyZW50KCkuYWRkQ2xhc3MoJ2lucHV0LS1maWxsZWQnKSA6ICQodGhpcykucGFyZW50KCkucmVtb3ZlQ2xhc3MoJ2lucHV0LS1maWxsZWQnKTtcbn0pO1xuXG4vLyBhcHBseSBtYXNrIHRvIHBob25lIGlucHV0c1xuJCgnLmlucHV0LS10ZWwgLmlucHV0X19maWVsZCcpLmlucHV0bWFzaygnOCA5OTkgOTk5IDk5IDk5Jyk7XG5cbi8vIHNob3cvaGlkZSBzZW5kIGNvZGUgYnV0dG9uIGRlcHBlbmRpbmcgb24gcGhvbmUgaW5wdXQgdmFsdWVcbiQoJy5pbnB1dC0tdGVsIC5pbnB1dF9fZmllbGQnKS5vbignaW5wdXQnLCBmdW5jdGlvbiAoKSB7XG4gIGNvbnN0IHZhbCA9ICQodGhpcykudmFsKCk7XG4gIFxuICBpZiAodmFsICE9PSAnJyAmJiAhL18vZy50ZXN0KHZhbCkpIHtcbiAgICAkKHRoaXMpLnNpYmxpbmdzKCcuanMtc2VuZC10ZWwnKS5yZW1vdmVBdHRyKCdkaXNhYmxlZCcpO1xuICB9IGVsc2Uge1xuICAgICQodGhpcykuc2libGluZ3MoJy5qcy1zZW5kLXRlbCcpLmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XG4gIH1cbn0pO1xuXG4vLyBhcHBseSBtYXNrIHRvIGNvZGUgaW5wdXRzXG4kKCcuaW5wdXQtLWNvZGUgLmlucHV0X19maWVsZCcpLmlucHV0bWFzaygnOTk5OScpO1xuXG4gIC8vIHNldCBzZWN0aW9ucyBtZW50aW9uZWQgaW4gaGVhZGVyXG5jb25zdCBzZWN0aW9ucyA9IFskKCcucGFnZS13cmFwcGVyJyksICQoJy53aHknKSwgJCgnLmFib3V0JyksICQoJy5mYXEnKV07XG5cbi8vIHNldCBjdXJyZW50IHNlY3Rpb25cbmNvbnN0IHNldExpbmtzID0gKCkgPT4ge1xuICBzZWN0aW9ucy5tYXAoZWwgPT4ge1xuICAgIGNvbnN0IHRvcE9mZnNldCA9IGVsLm9mZnNldCgpLnRvcDtcbiAgICBpZiAodG9wT2Zmc2V0IDw9IHdpbmRvdy5zY3JvbGxZICsgJCgnLmhlYWRlcicpLmlubmVySGVpZ2h0KCkgKyAzMCkge1xuICAgICAgJCgnLmhlYWRlcl9fbGluay0tY3VycmVudCcpLnJlbW92ZUNsYXNzKCdoZWFkZXJfX2xpbmstLWN1cnJlbnQnKTtcbiAgICAgICQoYC5oZWFkZXJfX2xpbmtbZGF0YS1zY3JvbGw9JHtlbFswXS5jbGFzc0xpc3RbMF19XWApLmFkZENsYXNzKCdoZWFkZXJfX2xpbmstLWN1cnJlbnQnKTtcbiAgICB9XG4gIH0pO1xufTtcblxuLy8gc2V0IGhlYWRlciBiYWNrZ3JvdW5kXG5jb25zdCBzZXRIZWFkZXIgPSAoKSA9PiB7XG4gIGlmICh3aW5kb3cuc2Nyb2xsWSA8IDUwKSB7XG4gICAgJCgnLmhlYWRlcicpLnJlbW92ZUNsYXNzKCdoZWFkZXItLWJnJyk7XG4gIH0gZWxzZSB7XG4gICAgJCgnLmhlYWRlcicpLmFkZENsYXNzKCdoZWFkZXItLWJnJyk7XG4gIH1cbn07XG5cbi8vIHNldCBvbmNlIHBhZ2UgaXMgbG9hZGVkXG5zZXRMaW5rcygpO1xuXG4vLyBmdW5jdGlvbiBjYWxsIGZyZXF1ZW5jeSBsYXRlbmN5IGZvciBiZXR0ZXIgcGVyZm9tYW5jZVxuY29uc3QgZGVib3VuY2UgPSAoZnVuY3Rpb24oKXtcbiAgdmFyIHRpbWVyID0gMDtcbiAgcmV0dXJuIGZ1bmN0aW9uKGNhbGxiYWNrLCBtcyl7XG4gICAgY2xlYXJUaW1lb3V0KHRpbWVyKTtcbiAgICB0aW1lciA9IHNldFRpbWVvdXQoY2FsbGJhY2ssIG1zKTtcbiAgfTtcbn0pKCk7XG5cbi8vIHNldCBvbiBwYWdlIHNjcm9sbFxuJCh3aW5kb3cpLm9uKCdzY3JvbGwnLCAoKSA9PiB7XG4gIGRlYm91bmNlKHNldExpbmtzLCAzMDApO1xuXG4gIHNldEhlYWRlcigpO1xufSk7XG5cblxubGV0IGhlYWRlck1vYmlsZVNob3duID0gZmFsc2U7XG5cbi8vIHNjcm9sbCB0byBzcGVjaWZpYyBzZWN0aW9uXG4kKCcuanMtc2Nyb2xsdG8nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgJCgnYm9keScpLmNzcyh7XG4gICAgJ3Bvc2l0aW9uJzogJ3N0YXRpYycsXG4gICAgJ21hcmdpbi10b3AnOiAnMCdcbiAgfSk7XG5cbiAgaGVhZGVyTW9iaWxlU2hvd24gPSBmYWxzZTtcblxuICAkKCcuaGVhZGVyX19idXJnZXInKS5yZW1vdmVDbGFzcygnaGVhZGVyX19idXJnZXItLWFjdGl2ZScpO1xuICAkKCcuaGVhZGVyX19tb2JpbGUnKS5yZW1vdmVDbGFzcygnaGVhZGVyX19tb2JpbGUtLWFjdGl2ZScpO1xuXG4gICQoW2RvY3VtZW50LmRvY3VtZW50RWxlbWVudCwgZG9jdW1lbnQuYm9keV0pLmFuaW1hdGUoe1xuICAgIHNjcm9sbFRvcDogJChgLiR7JCh0aGlzKS5hdHRyKCdkYXRhLXNjcm9sbCcpfWApLm9mZnNldCgpLnRvcCAtICQoJy5oZWFkZXInKS5pbm5lckhlaWdodCgpXG4gIH0sIDUwMCk7XG59KTtcblxuLy8gaGFuZGxpbmcgbW9iaWxlIG1lbnVcbiQoJy5oZWFkZXJfX2J1cmdlcicpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgJCh0aGlzKS50b2dnbGVDbGFzcygnaGVhZGVyX19idXJnZXItLWFjdGl2ZScpO1xuICAkKCcuaGVhZGVyX19tb2JpbGUnKS50b2dnbGVDbGFzcygnaGVhZGVyX19tb2JpbGUtLWFjdGl2ZScpO1xuXG4gIGhlYWRlck1vYmlsZVNob3duID0gIWhlYWRlck1vYmlsZVNob3duO1xuXG4gIGlmIChoZWFkZXJNb2JpbGVTaG93bikge1xuICAgIHNjcm9sbCA9IHdpbmRvdy5zY3JvbGxZO1xuICAgICQoJ2JvZHknKS5jc3Moe1xuICAgICAgJ3Bvc2l0aW9uJzogJ2ZpeGVkJyxcbiAgICAgICdtYXJnaW4tdG9wJzogLXNjcm9sbFxuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgICQoJ2JvZHknKS5jc3Moe1xuICAgICAgJ3Bvc2l0aW9uJzogJ3N0YXRpYycsXG4gICAgICAnbWFyZ2luLXRvcCc6ICcwJ1xuICAgIH0pO1xuXG4gICAgd2luZG93LnNjcm9sbFRvKDAsIHNjcm9sbCk7XG4gIH1cbn0pO1xuICAvLyBzZXQgaGVybyBzZWN0aW9uIHBhcmFsbGF4XG5jb25zdCBzZXRIZXJvID0gKCkgPT4ge1xuICBpZiAod2luZG93LnNjcm9sbFkgPCB3aW5kb3cuaW5uZXJIZWlnaHQpIHtcbiAgICAkKCcuaGVybycpLmNzcygndHJhbnNmb3JtJywgYHRyYW5zbGF0ZVkoJHstd2luZG93LnNjcm9sbFkgLyA1fXB4KWApXG4gIH1cbn07XG5cbi8vIHNldCBvbmNlIHBhZ2UgaXMgbG9hZGVkXG5zZXRIZWFkZXIoKTtcblxuLy8gc2V0IG9uIHBhZ2Ugc2Nyb2xsXG5pZiAod2luZG93LmlubmVyV2lkdGggPj0gMTIwMCkge1xuICAkKHdpbmRvdykub24oJ3Njcm9sbCcsICgpID0+IHtcbiAgICBzZXRIZXJvKCk7XG4gIH0pO1xufVxuXG4vLyBzY3JvbGwgdG8gY2FsYyBzZWN0aW9uXG4kKCcuanMtc2Nyb2xsLWNhbGMnKS5vbignY2xpY2snLCBlID0+IHtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAkKFtkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsIGRvY3VtZW50LmJvZHldKS5hbmltYXRlKHtcbiAgICBzY3JvbGxUb3A6ICQoJy5jYWxjJykub2Zmc2V0KCkudG9wIC0gJCgnLmhlYWRlcicpLmlubmVySGVpZ2h0KCkgLSAzMFxuICB9LCA1MDApO1xufSk7XG5cbi8vIHRvZ2dsZSBoZXJvIHZpZGVvIHBvcHVwXG4kKCcuaGVyb19fcGxheScpLm9uKCdjbGljaycsICgpID0+IHtcbiAgc2Nyb2xsID0gd2luZG93LnNjcm9sbFk7XG5cbiAgJCgnYm9keScpLmNzcyh7XG4gICAgJ3Bvc2l0aW9uJzogJ2ZpeGVkJyxcbiAgICAnbWFyZ2luLXRvcCc6IC1zY3JvbGxcbiAgfSk7XG5cbiAgJCgnLmhlcm8tcG9wdXBfX3dpbmRvdycpLmFwcGVuZCgnPGlmcmFtZSB3aWR0aD1cIjEwMCVcIiBoZWlnaHQ9XCIxMDAlXCIgc3JjPVwiaHR0cHM6Ly93d3cueW91dHViZS5jb20vZW1iZWQvb3ZVTVZWZ01hRFU/YXV0b3BsYXk9MVwiIGZyYW1lYm9yZGVyPVwiMFwiIGFsbG93PVwiYWNjZWxlcm9tZXRlcjsgYXV0b3BsYXk7IGVuY3J5cHRlZC1tZWRpYTsgZ3lyb3Njb3BlOyBwaWN0dXJlLWluLXBpY3R1cmVcIiBhbGxvd2Z1bGxzY3JlZW4pPicpXG4gICQoJy5oZXJvLXBvcHVwJykuZmFkZUluKDMwMCk7XG59KTtcblxuLy8gY2xvc2UgaGVybyB2aWRlbyBwb3B1cFxuJCgnLmhlcm8tcG9wdXBfX2Nsb3NlJykub24oJ2NsaWNrJywgKCkgPT4ge1xuICAkKCdib2R5JykuY3NzKHtcbiAgICAncG9zaXRpb24nOiAnc3RhdGljJyxcbiAgICAnbWFyZ2luLXRvcCc6ICcwJ1xuICB9KTtcblxuICB3aW5kb3cuc2Nyb2xsVG8oMCwgc2Nyb2xsKTtcblxuICAkKCcuaGVyby1wb3B1cCcpLmZhZGVPdXQoMzAwKTtcbiAgJCgnLmhlcm8tcG9wdXAgaWZyYW1lJykucmVtb3ZlKCk7XG59KTtcbiAgLy8gbnVtYmVyIGFuaW1hdGlvbiBmdW5jdGlvblxuY29uc3QgYW5pbWF0ZVZhbHVlID0gKHNlbGVjdG9yLCBzdGFydCwgZW5kLCBkdXJhdGlvbiwgcGVyY2VudCA9IGZhbHNlKSA9PiB7XG4gIGxldCBjdXJyZW50ID0gc3RhcnQ7XG4gIGNvbnN0IHJhbmdlID0gZW5kIC0gc3RhcnQ7XG4gIGNvbnN0IGluY3JlbWVudCA9IGVuZCA+IHN0YXJ0ID8gKHJhbmdlIC8gZHVyYXRpb24pIDogKHJhbmdlIC8gZHVyYXRpb24pO1xuICBjb25zdCBzdGVwVGltZSA9IE1hdGguYWJzKE1hdGguZmxvb3IoZHVyYXRpb24gLyByYW5nZSkpO1xuICBjb25zdCB0aW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uKCkge1xuICAgICAgY3VycmVudCArPSBpbmNyZW1lbnQ7XG4gICAgICAkKHNlbGVjdG9yKS50ZXh0KHBlcmNlbnQgPyAnMCwnICsgTWF0aC5mbG9vcihjdXJyZW50KS50b1N0cmluZygpLnJlcGxhY2UoL1xcQig/PShcXGR7M30pKyg/IVxcZCkpL2csIFwiIFwiKSArICclJyA6IE1hdGguZmxvb3IoY3VycmVudCkudG9TdHJpbmcoKS5yZXBsYWNlKC9cXEIoPz0oXFxkezN9KSsoPyFcXGQpKS9nLCBcIiBcIikpO1xuICAgICAgaWYgKE1hdGguZmxvb3IoY3VycmVudCkgPT0gZW5kKSB7XG4gICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lcik7XG4gICAgICB9XG4gIH0sIHN0ZXBUaW1lKTtcbn07XG5cbi8vIHNldCB3aGV0aGVyIHNwZWNpZmljICBpdGVtcyBhcmUgYWxyZWFkeSBhbmltYXRlZFxubGV0IGRlcG9zaXRJc0FuaW1hdGVkID0gZmFsc2U7XG5sZXQgc3RhdHNBcmVBbmltYXRlZCA9IGZhbHNlO1xuXG4kKHdpbmRvdykub24oJ3Njcm9sbCcsICgpID0+IHtcbiAgLy8gYW5pbWF0ZSBjaGFydCBhcHBlYXJpbmcgd2hpbGUgc2Nyb2xsaW5nXG4gIGNvbnN0IGNoYXJ0VG9wID0gJCgnLmNhbGNfX2NoYXJ0Jykub2Zmc2V0KCkudG9wO1xuICBjb25zdCBzY3JvbGxXaXRoV2luZG93ID0gd2luZG93LnNjcm9sbFkgKyB3aW5kb3cuaW5uZXJIZWlnaHQ7XG4gIGlmIChzY3JvbGxXaXRoV2luZG93ID49IGNoYXJ0VG9wICYmIHdpbmRvdy5zY3JvbGxZIC0gd2luZG93LmlubmVySGVpZ2h0IC8gMS41IDw9IGNoYXJ0VG9wICsgd2luZG93LmlubmVySGVpZ2h0IC8gMS41KSB7XG4gICAgY29uc3QgcHJvZ3Jlc3MgPSAoKHNjcm9sbFdpdGhXaW5kb3cpIC0gKGNoYXJ0VG9wICsgd2luZG93LmlubmVySGVpZ2h0IC8gMS41KSk7XG4gICAgJCgnLmNhbGNfX2NoYXJ0JykuY3NzKCd3aWR0aCcsIChwcm9ncmVzcyA8PSAxMDAgPyBwcm9ncmVzcyA6IDEwMCkgKyAndncnKVxuICB9XG5cbiAgLy8gYW5pbWF0ZSBpdGVtcyB3aGVuIHVzZXIgc2Nyb2xsZWQgdG8gdGhlbVxuICBpZiAoIWRlcG9zaXRJc0FuaW1hdGVkICYmIHNjcm9sbFdpdGhXaW5kb3cgLSA1MCA+PSAkKCcuY2FsY3VsYXRvcl9fdG90YWwgc3BhbicpLm9mZnNldCgpLnRvcCkge1xuICAgIGFuaW1hdGVWYWx1ZSgnLmNhbGN1bGF0b3JfX3RvdGFsIHNwYW4nLCAxMDAwMDAsIDAsIDIyKTtcbiAgICBkZXBvc2l0SXNBbmltYXRlZCA9IHRydWU7XG4gIH1cbiAgXG4gIGlmICghc3RhdHNBcmVBbmltYXRlZCAmJiBzY3JvbGxXaXRoV2luZG93IC0gNTAgPj0gJCgnLmNhbGNfX3N0YXRzLWNvbCcpLm9mZnNldCgpLnRvcCkge1xuICAgIGFuaW1hdGVWYWx1ZSgnLmNhbGNfX3N0YXRzLWNvbDpudGgtY2hpbGQoMSkgLmNhbGNfX3N0YXRzLWhlYWQnLCAwLCAzMywgMzMsIHRydWUpO1xuICAgIGFuaW1hdGVWYWx1ZSgnLmNhbGNfX3N0YXRzLWNvbDpudGgtY2hpbGQoMikgLmNhbGNfX3N0YXRzLWhlYWQnLCAwLCAxNzg5LCAyMCk7XG4gICAgYW5pbWF0ZVZhbHVlKCcuY2FsY19fc3RhdHMtY29sOm50aC1jaGlsZCgzKSAuY2FsY19fc3RhdHMtaGVhZCcsIDAsIDExNjUsIDIwKTtcbiAgICBzdGF0c0FyZUFuaW1hdGVkID0gdHJ1ZTtcbiAgfVxufSk7XG4gIC8vIG1hc2sgZm9yIGRlcG9zaXQgaW5wdXRcbm5ldyBBdXRvTnVtZXJpYygnLmNhbGN1bGF0b3JfX2lucHV0IFtuYW1lPVwiZGVwb3NpdFwiXScsIHtcbiAgYVNlcDogJyAnLFxuICBkZWNpbWFsUGxhY2VzOiAwXG59KTtcblxuLy8gbWFzayBmb3IgdGVybSBpbnB1dFxubmV3IEF1dG9OdW1lcmljKCcuY2FsY3VsYXRvcl9faW5wdXQgW25hbWU9XCJ0ZXJtXCJdJywge1xuICBhU2VwOiAnICcsXG4gIGRlY2ltYWxQbGFjZXM6IDBcbn0pO1xuXG5sZXQgZGVwb3NpdCA9IDA7XG5sZXQgdGVybSA9IDA7XG5sZXQgcHJvZml0ID0gMi41O1xuXG4vLyBjYWxjdWxhdGUgdG90YWwgZGVwb3NpdFxuY29uc3QgY2FsY3VsYXRlID0gKCkgPT4ge1xuICBjb25zdCB2YWx1ZSA9IHBhcnNlSW50KGRlcG9zaXQgKiAocHJvZml0IC8gMTAwKSAqIDMwICogdGVybSArIGRlcG9zaXQpO1xuICAkKCcuY2FsY3VsYXRvcl9fdG90YWwgc3BhbicpLnRleHQodmFsdWUudG9TdHJpbmcoKS5yZXBsYWNlKC9cXEIoPz0oXFxkezN9KSsoPyFcXGQpKS9nLCBcIiBcIikpO1xufTtcblxuLy8gcmVjYWxjdWxhdGUgdG90YWwgZGVwb3NpdCB3aGVuIHVzZXIgY2hhbmdlIGRhdGFcbiQoJy5jYWxjdWxhdG9yX19pbnB1dCBpbnB1dCcpLm9uKCdpbnB1dCcsIGZ1bmN0aW9uICgpIHtcbiAgaWYgKCQodGhpcykuYXR0cignbmFtZScpID09PSAnZGVwb3NpdCcpIHtcbiAgICBkZXBvc2l0ID0gKyQodGhpcykudmFsKCkucmVwbGFjZSgvIC9nLCAnJyk7XG4gIH1cbiAgaWYgKCQodGhpcykuYXR0cignbmFtZScpID09PSAndGVybScpIHtcbiAgICB0ZXJtID0gKyQodGhpcykudmFsKCkucmVwbGFjZSgvIC9nLCAnJyk7XG4gIH1cblxuICBjYWxjdWxhdGUoKTtcbn0pO1xuXG4vLyByZWNhbGN1bGF0ZSB0b3RhbCBkZXBvc2l0IHdoZW4gdXNlciBjaGFuZ2UgcHJvZml0IHZhbHVlXG4kKCcuanMtcmFuZ2UnKS5pb25SYW5nZVNsaWRlcih7XG4gIHR5cGU6ICdzaW5nbGUnLFxuICBtYXg6IDUsXG4gIG1pbjogMCxcbiAgZnJvbTogMi41LFxuICBzdGVwOiAwLjEsXG4gIG9uQ2hhbmdlOiBkYXRhID0+IHtcbiAgICBjb25zdCB2YWwgPSBkYXRhLmlucHV0WzBdLnZhbHVlO1xuICAgIHByb2ZpdCA9ICt2YWw7XG4gICAgY2FsY3VsYXRlKCk7XG5cbiAgICAkKCcuaXJzLXNpbmdsZScpLnNob3coKTtcbiAgICAkKCcuY2FsY3VsYXRvcl9fZ3JpZC1pdGVtJykubWFwKGVsID0+IHtcbiAgICAgIGlmICgrdmFsID49ICtlbCkge1xuICAgICAgICAkKGAuY2FsY3VsYXRvcl9fZ3JpZC1pdGVtOmVxKCR7ZWx9KWApLmFkZENsYXNzKCdjYWxjdWxhdG9yX19ncmlkLWl0ZW0tLWNoZWNrJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkKGAuY2FsY3VsYXRvcl9fZ3JpZC1pdGVtOmVxKCR7ZWx9KWApLnJlbW92ZUNsYXNzKCdjYWxjdWxhdG9yX19ncmlkLWl0ZW0tLWNoZWNrJyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG4gIG9uRmluaXNoOiAoKSA9PiB7XG4gICAgJCgnLmlycy1zaW5nbGUnKS5oaWRlKCk7XG4gIH1cbn0pO1xuICAvLyBzZXQgZmVlZGJhY2sgc2xpZGVyIG9uIG1vYmlsZSBkZXZpY2VzXG5pZiAoJCh3aW5kb3cpLmlubmVyV2lkdGgoKSA8IDEyMDApIHtcbiAgY29uc3QgZmVlZGJhY2tTbGlkZXIgPSBuZXcgU3dpcGVyKCcuZmVlZGJhY2tfX2dyaWQnLCB7XG4gICAgZGlyZWN0aW9uOiAnaG9yaXpvbnRhbCcsXG4gICAgc3BlZWQ6IDUwMCxcbiAgICB3cmFwcGVyQ2xhc3M6ICdmZWVkYmFja19fcm93JyxcbiAgICBzbGlkZUNsYXNzOiAnZmVlZGJhY2tfX3ZpZGVvJyxcbiAgICBzcGFjZUJldHdlZW46IDMwLFxuICAgIGxvb3A6IHRydWUsXG4gICAgcGFnaW5hdGlvbjoge1xuICAgICAgZWw6ICcuZmVlZGJhY2tfX3BhZ2luYXRpb24nLFxuICAgICAgY2xpY2thYmxlOiB0cnVlLFxuICAgIH1cbiAgfSk7XG59XG4gIC8vIHNldCBzbGlkZXJzIGRlcGVuZGluZyBvbiBkZXZpY2VcbmlmICgkKHdpbmRvdykuaW5uZXJXaWR0aCgpIDwgMTIwMCkge1xuICBjb25zdCBzbGlkZXIgPSBuZXcgU3dpcGVyKCcuc2xpZGVyX19jb250YWluZXInLCB7XG4gICAgZGlyZWN0aW9uOiAnaG9yaXpvbnRhbCcsXG4gICAgc3BlZWQ6IDUwMCxcbiAgICB3cmFwcGVyQ2xhc3M6ICdzbGlkZXJfX3dyYXBwZXInLFxuICAgIHNsaWRlQ2xhc3M6ICdzbGlkZXJfX3NsaWRlJyxcbiAgICBzcGFjZUJldHdlZW46IDMwLFxuICAgIGxvb3A6IHRydWUsXG4gICAgc3BhY2VCZXR3ZWVuOiAzMCxcbiAgICBwYWdpbmF0aW9uOiB7XG4gICAgICBlbDogJy5zbGlkZXJfX3BhZ2luYXRpb24nLFxuICAgICAgY2xpY2thYmxlOiB0cnVlLFxuICAgIH1cbiAgfSk7XG59IGVsc2Uge1xuICBjb25zdCBzbGlkZXIgPSBuZXcgU3dpcGVyKCcuc2xpZGVyX19jb250YWluZXInLCB7XG4gICAgZGlyZWN0aW9uOiAndmVydGljYWwnLFxuICAgIHNwZWVkOiA1MDAsXG4gICAgd3JhcHBlckNsYXNzOiAnc2xpZGVyX193cmFwcGVyJyxcbiAgICBzbGlkZUNsYXNzOiAnc2xpZGVyX19zbGlkZScsXG4gICAgc3BhY2VCZXR3ZWVuOiAzMCxcbiAgICBsb29wOiB0cnVlLFxuICAgIGF1dG9wbGF5OiB7XG4gICAgICBkZWxheTogMzAwMCxcbiAgICAgIGRpc2FibGVPbkludGVyYWN0aW9uOiBmYWxzZSxcbiAgICB9LFxuICAgIHBhZ2luYXRpb246IHtcbiAgICAgIGVsOiAnLnNsaWRlcl9fcGFnaW5hdGlvbicsXG4gICAgICBjbGlja2FibGU6IHRydWUsXG4gICAgfVxuICB9KTtcbn1cbiAgLy8gdG9nZ2xpbmcgZmFxIGl0ZW1zXG4kKCcuZmFxLWl0ZW1fX2hlYWQnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gIGlmICgkKHRoaXMpLmhhc0NsYXNzKCdmYXEtaXRlbV9faGVhZC0tb3BlbmVkJykpIHtcbiAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdmYXEtaXRlbV9faGVhZC0tb3BlbmVkJyk7XG4gIH0gZWxzZSB7XG4gICAgJCgnLmZhcS1pdGVtX19oZWFkLS1vcGVuZWQnKS5uZXh0KCkuc2xpZGVVcCgzMDApO1xuICAgICQoJy5mYXEtaXRlbV9faGVhZC0tb3BlbmVkJykucmVtb3ZlQ2xhc3MoJ2ZhcS1pdGVtX19oZWFkLS1vcGVuZWQnKTtcbiAgICAkKHRoaXMpLmFkZENsYXNzKCdmYXEtaXRlbV9faGVhZC0tb3BlbmVkJyk7XG4gIH1cbiAgJCh0aGlzKS5uZXh0KCkuc2xpZGVUb2dnbGUoMzAwKTtcbn0pO1xuICAvLyBzaG93IHBvcHVwXG4kKCcuanMtb3Blbi1wb3B1cCcpLm9uKCdjbGljaycsIGUgPT4ge1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgc2Nyb2xsID0gd2luZG93LnNjcm9sbFk7XG5cbiAgJCgnYm9keScpLmNzcyh7XG4gICAgJ3Bvc2l0aW9uJzogJ2ZpeGVkJyxcbiAgICAnbWFyZ2luLXRvcCc6IC1zY3JvbGxcbiAgfSk7XG4gIFxuICAkKCcucG9wdXAnKS5mYWRlSW4oMzAwKTtcbn0pO1xuXG4vLyBjbG9zZSBwb3B1cFxuJCgnLnBvcHVwX19jbG9zZScpLm9uKCdjbGljaycsICgpID0+IHtcbiAgJCgnYm9keScpLmNzcyh7XG4gICAgJ3Bvc2l0aW9uJzogJ3N0YXRpYycsXG4gICAgJ21hcmdpbi10b3AnOiAnMCdcbiAgfSk7XG5cbiAgd2luZG93LnNjcm9sbFRvKDAsIHNjcm9sbCk7XG5cbiAgJCgnLnBvcHVwJykuZmFkZU91dCgzMDApO1xufSk7XG5cbi8vIHNlbmQgcG9wdXAgZm9ybVxuJCgnLmpzLXNlbmQtdGVsJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICQodGhpcykuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcbiAgJCh0aGlzKS5zaWJsaW5ncygnLmlucHV0X19maWVsZCcpLmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XG4gICQoJy5wb3B1cF9fY29kZSBpbnB1dCcpLnJlbW92ZUF0dHIoJ2Rpc2FibGVkJyk7XG4gICQoJy5qcy1zZW5kLWZvcm0nKS5yZW1vdmVBdHRyKCdkaXNhYmxlZCcpO1xufSk7XG5cbn1cbiJdfQ==
