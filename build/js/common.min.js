function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}window.onload=function(){var t=0;new WOW({boxClass:"js-wow",offset:100}).init();function e(e){e<1200?$('meta[name="viewport"]').attr("content","width=320"):$('meta[name="viewport"]').attr("content","width=device-width, initial-scale=1, user-scalable=no")}e($(window).innerWidth()),$(window).resize(function(){e($(window).innerWidth())}),1200<=window.innerWidth&&(particlesJS.load("why-particles","js/particles.json"),particlesJS.load("demo-particles","js/particles.json")),particlesJS.load("faq-particles","js/particles.json"),$(".js-play-video").on("click",function(){var e=$(this).attr("data-id");$(this).parent().hasClass("video--local")?$(this).parent().find("video").trigger("play"):$(this).parent().append('<iframe width="570" height="285" src="https://www.youtube.com/embed/'+e+'?autoplay=1" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen)>'),$(this).hide()}),$(document).ready(function(){var e=$(".video--local").attr("data-url");$(".video--local").append('<video width="570" height="285" controls="" class="video__player">\n    <source src='+e+' type="video/mp4">\n  </video>')}),$(".input__field").on("focus",function(){$(this).parent().addClass("input--focused")}).on("blur",function(){$(this).parent().removeClass("input--focused")}),$(".input__field").on("change",function(){""!==$(this).val()?$(this).parent().addClass("input--filled"):$(this).parent().removeClass("input--filled")}),$(".input--tel .input__field").inputmask("8 999 999 99 99"),$(".input--tel .input__field").on("input",function(){var e=$(this).val();""===e||/_/g.test(e)?$(this).siblings(".js-send-tel").attr("disabled","disabled"):$(this).siblings(".js-send-tel").removeAttr("disabled")}),$(".input--code .input__field").inputmask("9999");function i(){o.map(function(e){e.offset().top<=window.scrollY+$(".header").innerHeight()+30&&($(".header__link--current").removeClass("header__link--current"),$(".header__link[data-scroll="+e[0].classList[0]+"]").addClass("header__link--current"))})}function a(){window.scrollY<50?$(".header").removeClass("header--bg"):$(".header").addClass("header--bg")}var o=[$(".page-wrapper"),$(".why"),$(".about"),$(".faq")];i();var n,l=(n=0,function(e,t){clearTimeout(n),n=setTimeout(e,t)});$(window).on("scroll",function(){l(i,300),a()});var r=!1;$(".js-scrollto").on("click",function(e){e.preventDefault(),$("body").css({position:"static","margin-top":"0"}),r=!1,$(".header__burger").removeClass("header__burger--active"),$(".header__mobile").removeClass("header__mobile--active"),$([document.documentElement,document.body]).animate({scrollTop:$("."+$(this).attr("data-scroll")).offset().top-$(".header").innerHeight()},500)}),$(".header__burger").on("click",function(){$(this).toggleClass("header__burger--active"),$(".header__mobile").toggleClass("header__mobile--active"),(r=!r)?(t=window.scrollY,$("body").css({position:"fixed","margin-top":-t})):($("body").css({position:"static","margin-top":"0"}),window.scrollTo(0,t))});a(),1200<=window.innerWidth&&$(window).on("scroll",function(){window.scrollY<window.innerHeight&&$(".hero").css("transform","translateY("+-window.scrollY/5+"px)")}),$(".js-scroll-calc").on("click",function(e){e.preventDefault(),$([document.documentElement,document.body]).animate({scrollTop:$(".calc").offset().top-$(".header").innerHeight()-30},500)}),$(".hero__play").on("click",function(){t=window.scrollY,$("body").css({position:"fixed","margin-top":-t}),$(".hero-popup__window").append('<iframe width="100%" height="100%" src="https://www.youtube.com/embed/ovUMVVgMaDU?autoplay=1" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen)>'),$(".hero-popup").fadeIn(300)}),$(".hero-popup__close").on("click",function(){$("body").css({position:"static","margin-top":"0"}),window.scrollTo(0,t),$(".hero-popup").fadeOut(300),$(".hero-popup iframe").remove()});function s(e,t,i,a,o){var n=4<arguments.length&&void 0!==o&&o,l=t,r=i-t,s=r/a,c=Math.abs(Math.floor(a/r)),d=setInterval(function(){l+=s,$(e).text(n?"0,"+Math.floor(l).toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")+"%":Math.floor(l).toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")),Math.floor(l)==i&&clearInterval(d)},c)}var c=!1,d=!1;$(window).on("scroll",function(){var e=$(".calc__chart").offset().top,t=window.scrollY+1.2*window.innerHeight;if(e<=t&&(window.scrollY-window.innerHeight/1.2)/3<=(e+window.innerHeight/1.2)/3){var i=(t-(e+window.innerHeight/1.2))/3;$(".calc__chart").css("width",(i<=100?i:100)+"vw")}!c&&t-100>=$(".calculator__total span").offset().top&&(s(".calculator__total span",1e5,0,22),c=!0),!d&&t-100>=$(".calc__stats-col").offset().top&&(s(".calc__stats-col:nth-child(1) .calc__stats-head",0,33,33,!0),s(".calc__stats-col:nth-child(2) .calc__stats-head",0,1789,20),s(".calc__stats-col:nth-child(3) .calc__stats-head",0,1165,20),d=!0)}),new AutoNumeric('.calculator__input [name="deposit"]',{aSep:" ",decimalPlaces:0}),new AutoNumeric('.calculator__input [name="term"]',{aSep:" ",decimalPlaces:0});function p(){var e=parseInt(u*(h/100)*30*_+u);$(".calculator__total span").text(e.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "))}var u=0,_=0,h=2.5;if($(".calculator__input input").on("input",function(){"deposit"===$(this).attr("name")&&(u=+$(this).val().replace(/ /g,"")),"term"===$(this).attr("name")&&(_=+$(this).val().replace(/ /g,"")),p()}),$(".js-range").ionRangeSlider({type:"single",max:5,min:0,from:2.5,step:.1,onChange:function(e){var t=e.input[0].value;h=+t,p(),$(".irs-single").show(),$(".calculator__grid-item").map(function(e){+e<=+t?$(".calculator__grid-item:eq("+e+")").addClass("calculator__grid-item--check"):$(".calculator__grid-item:eq("+e+")").removeClass("calculator__grid-item--check")})},onFinish:function(){$(".irs-single").hide()}}),$(window).innerWidth()<1200)new Swiper(".feedback__grid",{direction:"horizontal",speed:500,wrapperClass:"feedback__row",slideClass:"feedback__video",spaceBetween:30,loop:!0,pagination:{el:".feedback__pagination",clickable:!0}});if($(window).innerWidth()<1200){var f;new Swiper(".slider__container",(_defineProperty(f={direction:"horizontal",speed:500,wrapperClass:"slider__wrapper",slideClass:"slider__slide",spaceBetween:30,loop:!0},"spaceBetween",30),_defineProperty(f,"pagination",{el:".slider__pagination",clickable:!0}),f))}else new Swiper(".slider__container",{direction:"vertical",speed:500,wrapperClass:"slider__wrapper",slideClass:"slider__slide",spaceBetween:30,loop:!0,autoplay:{delay:3e3,disableOnInteraction:!1},pagination:{el:".slider__pagination",clickable:!0}});$(".faq-item__head").on("click",function(){$(this).hasClass("faq-item__head--opened")?$(this).removeClass("faq-item__head--opened"):($(".faq-item__head--opened").next().slideUp(300),$(".faq-item__head--opened").removeClass("faq-item__head--opened"),$(this).addClass("faq-item__head--opened")),$(this).next().slideToggle(300)}),$(".js-open-popup").on("click",function(e){e.preventDefault(),t=window.scrollY,$("body").css({position:"fixed","margin-top":-t}),$(".popup").fadeIn(300)}),$(".popup__close").on("click",function(){$("body").css({position:"static","margin-top":"0"}),window.scrollTo(0,t),$(".popup").fadeOut(300)}),$(".js-send-tel").on("click",function(e){e.preventDefault(),$(this).attr("disabled","disabled"),$(this).siblings(".input__field").attr("disabled","disabled"),$(".popup__code input").removeAttr("disabled"),$(".js-send-form").removeAttr("disabled")})};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1vbi5qcyJdLCJuYW1lcyI6WyJ3aW5kb3ciLCJvbmxvYWQiLCJzY3JvbGwiLCJXT1ciLCJib3hDbGFzcyIsIm9mZnNldCIsIndvdyIsImluaXQiLCJ3aWR0aCIsIiQiLCJzZXRSZXNwb25zaXZlIiwiYXR0ciIsImlubmVyV2lkdGgiLCJyZXNpemUiLCJwYXJ0aWNsZXNKUyIsImxvYWQiLCJvbiIsIklEIiwidGhpcyIsInBhcmVudCIsInRyaWdnZXIiLCJhcHBlbmQiLCJoaWRlIiwiZG9jdW1lbnQiLCJyZWFkeSIsIlVSTCIsImFkZENsYXNzIiwicmVtb3ZlQ2xhc3MiLCJ2YWwiLCJpbnB1dG1hc2siLCJ0ZXN0Iiwic2libGluZ3MiLCJyZW1vdmVBdHRyIiwic2V0TGlua3MiLCJzZWN0aW9ucyIsIm1hcCIsImVsIiwidG9wIiwidG9wT2Zmc2V0IiwiaW5uZXJIZWlnaHQiLCJjbGFzc0xpc3QiLCJzZXRIZWFkZXIiLCJ0aW1lciIsImRlYm91bmNlIiwiY2FsbGJhY2siLCJjbGVhclRpbWVvdXQiLCJzZXRUaW1lb3V0IiwibXMiLCJoZWFkZXJNb2JpbGVTaG93biIsImUiLCJwcmV2ZW50RGVmYXVsdCIsImNzcyIsInBvc2l0aW9uIiwibWFyZ2luLXRvcCIsInNjcm9sbFRvcCIsImJvZHkiLCJhbmltYXRlIiwidG9nZ2xlQ2xhc3MiLCJzY3JvbGxZIiwic2Nyb2xsVG8iLCJzZXRIZXJvIiwiZmFkZUluIiwiZmFkZU91dCIsInJlbW92ZSIsImFuaW1hdGVWYWx1ZSIsInNlbGVjdG9yIiwic3RhcnQiLCJlbmQiLCJkdXJhdGlvbiIsInBlcmNlbnQiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJjdXJyZW50IiwicmFuZ2UiLCJpbmNyZW1lbnQiLCJmbG9vciIsInN0ZXBUaW1lIiwiTWF0aCIsInNldEludGVydmFsIiwidG9TdHJpbmciLCJyZXBsYWNlIiwidGV4dCIsImRlcG9zaXRJc0FuaW1hdGVkIiwic3RhdHNBcmVBbmltYXRlZCIsImNoYXJ0VG9wIiwic2Nyb2xsV2l0aFdpbmRvdyIsIkF1dG9OdW1lcmljIiwiYVNlcCIsImNhbGN1bGF0ZSIsImRlcG9zaXQiLCJwcm9maXQiLCJ0ZXJtIiwiaW9uUmFuZ2VTbGlkZXIiLCJ0eXBlIiwibWF4IiwibWluIiwiZnJvbSIsInN0ZXAiLCJkYXRhIiwib25DaGFuZ2UiLCJpbnB1dCIsInZhbHVlIiwic2hvdyIsIm9uRmluaXNoIiwiU3dpcGVyIiwiZGlyZWN0aW9uIiwiZmVlZGJhY2tTbGlkZXIiLCJzcGVlZCIsIndyYXBwZXJDbGFzcyIsInNsaWRlQ2xhc3MiLCJzcGFjZUJldHdlZW4iLCJsb29wIiwicGFnaW5hdGlvbiIsIl9yZWYiLCJjbGlja2FibGUiLCJzbGlkZXIiLCJhdXRvcGxheSIsImRlbGF5IiwiaGFzQ2xhc3MiLCJuZXh0Iiwic2xpZGVVcCIsInNsaWRlVG9nZ2xlIl0sIm1hcHBpbmdzIjoic0lBQUFBLE9BQU9DLE9BQVMsV0FBaEJELElBQUFBLEVBQUEsRUFFTUUsSUFBWUMsSUFBQSxDQUdoQkMsU0FBVSxTQURWQyxPQUFNQyxNQUFOQyxPQUtGLFNBQUlBLEVBQUpDLEdBQ0VBLEVBQUEsS0FDRkMsRUFBTUMseUJBQUFBLEtBQUFBLFVBQWdCLGFBRWxCRCxFQUFBQSx5QkFBQUUsS0FBMkJBLFVBQTNCLHlEQU9KRCxFQUFjRCxFQUFFVCxRQUFRWSxjQUd4QkgsRUFBRVQsUUFBUWEsT0FBTyxXQURqQkgsRUFBQUQsRUFBQVQsUUFBQVksZ0JBQ0EsTUFBQVosT0FBQVksYUFHRUUsWUFBQUMsS0FBQSxnQkFBQSxxQkFDRkQsWUFBV0YsS0FBQUEsaUJBQW9CLHNCQUU3QkUsWUFBQUEsS0FBWUMsZ0JBQUsscUJBS25CTixFQUFFLGtCQUFrQk8sR0FBRyxRQUFTLFdBRDlCLElBQUFDLEVBQUFSLEVBQUFTLE1BQUFQLEtBQUEsV0FDQUYsRUFBQVMsTUFBQUMsU0FBa0JILFNBQXBCLGdCQUNFUCxFQUFBUyxNQUFNRCxTQUFhTixLQUFLLFNBQWJTLFFBQVgsUUFFRVgsRUFBQUEsTUFBQVUsU0FB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QUFBQSxJQUNFQyxzQkFEUSxHQUFBTCxXQVBvQyxDQVc5Q0EsR0FBQUEsc0JBQ0U3RSxXQUFJLEtBS1IzQixFQUFBLG1CQUFBTyxHQUFBLFFBQUEsV0FDQVAsRUFBQVMsTUFBQXFHLFNBQW1CdkcsMEJBQ25CUCxFQUFBUyxNQUFNUyxZQUFGLDJCQUVIbEIsRUFGRCwyQkFFTytHLE9BQUFDLFFBQUEsS0FDTGhILEVBQUFBLDJCQUFBa0IsWUFBb0M4RiwwQkFDcENoSCxFQUFBQSxNQUFFaUIsU0FBQSwyQkFFSGpCLEVBQUFTLE1BQUFzRyxPQUFBRSxZQUFBLE9BR0RqSCxFQUFBLGtCQUFBTyxHQUFBLFFBQUEsU0FBQWlDLEdBQ0Z4QyxFQUFFeUMsaUJBR0FoRCxFQUFTRixPQUFPMEQsUUFFaEJqRCxFQUFFLFFBQVEwQyxJQUFJLENBQWQxQyxTQUFVMEMsUUFDUkUsY0FBWW5ELElBSWRPLEVBQUUsVUFBVW9ELE9BQU8sT0FHckJwRCxFQUFBLGlCQUFBTyxHQUFBLFFBQUEsV0FDQVAsRUFBRSxRQUFBMEMsSUFBQSxDQUNBMUMsU0FBVTBDLFNBQ1JFLGFBQVksTUFJZHJELE9BQU8yRCxTQUFTLEVBQUd6RCxHQUVuQk8sRUFBRSxVQUFVcUQsUUFBUSxPQUd0QnJELEVBQUEsZ0JBQUFPLEdBQUEsUUFBQSxTQUFBaUMsR0FDQXhDLEVBQUV5QyxpQkFHQXpDLEVBQUVTLE1BQU1QLEtBQUssV0FBWSxZQUF6QkYsRUFBQUEsTUFBQXNCLFNBQWEsaUJBQVlwQixLQUF6QixXQUFBLFlBQ0FGLEVBQUFBLHNCQUFpQnVCLFdBQWpCLFlBQ0F2QixFQUFBQSxpQkFBRXVCLFdBQXNCQSIsImZpbGUiOiJjb21tb24ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsid2luZG93Lm9ubG9hZCA9ICgpID0+IHtcblxuICBsZXQgc2Nyb2xsID0gMDsgLy8gaGVhZGVyLCBoZXJvLCBwb3B1cFxuXG4gIGNvbnN0IHdvdyA9IG5ldyBXT1coe1xuICBib3hDbGFzczogJ2pzLXdvdycsXG4gIG9mZnNldDogMTAwXG59KTtcblxud293LmluaXQoKTtcbiAgLy8gc2V0dGluZyB2aWV3cG9ydCBtZXRhIHRhZ1xuY29uc3Qgc2V0UmVzcG9uc2l2ZSA9IHdpZHRoID0+IHtcbiAgaWYgKHdpZHRoIDwgMTIwMCkge1xuICAgICQoJ21ldGFbbmFtZT1cInZpZXdwb3J0XCJdJykuYXR0cignY29udGVudCcsICd3aWR0aD0zMjAnKTtcbiAgfSBlbHNlIHtcbiAgICAkKCdtZXRhW25hbWU9XCJ2aWV3cG9ydFwiXScpLmF0dHIoJ2NvbnRlbnQnLCAnd2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEsIHVzZXItc2NhbGFibGU9bm8nKTtcbiAgfVxufTtcblxuLy8gc2V0IG9uY2UgcGFnZSBpcyBsb2FkZWRcbnNldFJlc3BvbnNpdmUoJCh3aW5kb3cpLmlubmVyV2lkdGgoKSk7XG5cbi8vIHNldCBvbiByZXNpemVcbiQod2luZG93KS5yZXNpemUoKCkgPT4ge1xuICBzZXRSZXNwb25zaXZlKCQod2luZG93KS5pbm5lcldpZHRoKCkpO1xufSk7XG4gIC8vIGxvYWQgcGFydGljbGVzIGRhdGEgZm9yIGFuaW1hdGVkIHNlY3Rpb25zXG5pZiAod2luZG93LmlubmVyV2lkdGggPj0gMTIwMCkge1xuICBwYXJ0aWNsZXNKUy5sb2FkKCd3aHktcGFydGljbGVzJywgJ2pzL3BhcnRpY2xlcy5qc29uJyk7XG4gIHBhcnRpY2xlc0pTLmxvYWQoJ2RlbW8tcGFydGljbGVzJywgJ2pzL3BhcnRpY2xlcy5qc29uJyk7XG59XG5wYXJ0aWNsZXNKUy5sb2FkKCdmYXEtcGFydGljbGVzJywgJ2pzL3BhcnRpY2xlcy5qc29uJyk7XG5cbiAgLy8gc2hvdyB5b3V0dWJlIHZpZGVvIHBsYXllclxuJCgnLmpzLXBsYXktdmlkZW8nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gIGNvbnN0IElEID0gJCh0aGlzKS5hdHRyKCdkYXRhLWlkJylcbiAgaWYgKCQodGhpcykucGFyZW50KCkuaGFzQ2xhc3MoJ3ZpZGVvLS1sb2NhbCcpKSB7XG4gICAgJCh0aGlzKS5wYXJlbnQoKS5maW5kKCd2aWRlbycpLnRyaWdnZXIoJ3BsYXknKTtcbiAgfSBlbHNlIHtcbiAgICAkKHRoaXMpLnBhcmVudCgpLmFwcGVuZChgPGlmcmFtZSB3aWR0aD1cIjU3MFwiIGhlaWdodD1cIjI4NVwiIHNyYz1cImh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL2VtYmVkLyR7SUR9P2F1dG9wbGF5PTFcIiBmcmFtZWJvcmRlcj1cIjBcIiBhbGxvdz1cImFjY2VsZXJvbWV0ZXI7IGF1dG9wbGF5OyBlbmNyeXB0ZWQtbWVkaWE7IGd5cm9zY29wZTsgcGljdHVyZS1pbi1waWN0dXJlXCIgYWxsb3dmdWxsc2NyZWVuKT5gKTtcbiAgfVxuICAkKHRoaXMpLmhpZGUoKTtcbn0pO1xuXG4vLyBsb2FkIGxvY2FsIHZpZGVvXG4kKGRvY3VtZW50KS5yZWFkeSgoKSA9PiB7XG4gIGNvbnN0IFVSTCA9ICQoJy52aWRlby0tbG9jYWwnKS5hdHRyKCdkYXRhLXVybCcpO1xuICAkKCcudmlkZW8tLWxvY2FsJykuYXBwZW5kKGA8dmlkZW8gd2lkdGg9XCI1NzBcIiBoZWlnaHQ9XCIyODVcIiBjb250cm9scz1cIlwiIGNsYXNzPVwidmlkZW9fX3BsYXllclwiPlxuICAgIDxzb3VyY2Ugc3JjPSR7VVJMfSB0eXBlPVwidmlkZW8vbXA0XCI+XG4gIDwvdmlkZW8+YCk7XG59KTtcbiAgLy8gc2V0IGlucHV0IGZvY3VzIHN0eWxlc1xuJCgnLmlucHV0X19maWVsZCcpLm9uKCdmb2N1cycsIGZ1bmN0aW9uICgpIHtcbiAgJCh0aGlzKS5wYXJlbnQoKS5hZGRDbGFzcygnaW5wdXQtLWZvY3VzZWQnKTtcbn0pLm9uKCdibHVyJywgZnVuY3Rpb24gKCkge1xuICAkKHRoaXMpLnBhcmVudCgpLnJlbW92ZUNsYXNzKCdpbnB1dC0tZm9jdXNlZCcpO1xufSk7XG5cbi8vIHNldCBpbnB1dCBmaWxsZWQgc3R5bGVzXG4kKCcuaW5wdXRfX2ZpZWxkJykub24oJ2NoYW5nZScsIGZ1bmN0aW9uICgpIHtcbiAgJCh0aGlzKS52YWwoKSAhPT0gJycgPyAkKHRoaXMpLnBhcmVudCgpLmFkZENsYXNzKCdpbnB1dC0tZmlsbGVkJykgOiAkKHRoaXMpLnBhcmVudCgpLnJlbW92ZUNsYXNzKCdpbnB1dC0tZmlsbGVkJyk7XG59KTtcblxuLy8gYXBwbHkgbWFzayB0byBwaG9uZSBpbnB1dHNcbiQoJy5pbnB1dC0tdGVsIC5pbnB1dF9fZmllbGQnKS5pbnB1dG1hc2soJzggOTk5IDk5OSA5OSA5OScpO1xuXG4vLyBzaG93L2hpZGUgc2VuZCBjb2RlIGJ1dHRvbiBkZXBwZW5kaW5nIG9uIHBob25lIGlucHV0IHZhbHVlXG4kKCcuaW5wdXQtLXRlbCAuaW5wdXRfX2ZpZWxkJykub24oJ2lucHV0JywgZnVuY3Rpb24gKCkge1xuICBjb25zdCB2YWwgPSAkKHRoaXMpLnZhbCgpO1xuICBcbiAgaWYgKHZhbCAhPT0gJycgJiYgIS9fL2cudGVzdCh2YWwpKSB7XG4gICAgJCh0aGlzKS5zaWJsaW5ncygnLmpzLXNlbmQtdGVsJykucmVtb3ZlQXR0cignZGlzYWJsZWQnKTtcbiAgfSBlbHNlIHtcbiAgICAkKHRoaXMpLnNpYmxpbmdzKCcuanMtc2VuZC10ZWwnKS5hdHRyKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuICB9XG59KTtcblxuLy8gYXBwbHkgbWFzayB0byBjb2RlIGlucHV0c1xuJCgnLmlucHV0LS1jb2RlIC5pbnB1dF9fZmllbGQnKS5pbnB1dG1hc2soJzk5OTknKTtcblxuICAvLyBzZXQgc2VjdGlvbnMgbWVudGlvbmVkIGluIGhlYWRlclxuY29uc3Qgc2VjdGlvbnMgPSBbJCgnLnBhZ2Utd3JhcHBlcicpLCAkKCcud2h5JyksICQoJy5hYm91dCcpLCAkKCcuZmFxJyldO1xuXG4vLyBzZXQgY3VycmVudCBzZWN0aW9uXG5jb25zdCBzZXRMaW5rcyA9ICgpID0+IHtcbiAgc2VjdGlvbnMubWFwKGVsID0+IHtcbiAgICBjb25zdCB0b3BPZmZzZXQgPSBlbC5vZmZzZXQoKS50b3A7XG4gICAgaWYgKHRvcE9mZnNldCA8PSB3aW5kb3cuc2Nyb2xsWSArICQoJy5oZWFkZXInKS5pbm5lckhlaWdodCgpICsgMzApIHtcbiAgICAgICQoJy5oZWFkZXJfX2xpbmstLWN1cnJlbnQnKS5yZW1vdmVDbGFzcygnaGVhZGVyX19saW5rLS1jdXJyZW50Jyk7XG4gICAgICAkKGAuaGVhZGVyX19saW5rW2RhdGEtc2Nyb2xsPSR7ZWxbMF0uY2xhc3NMaXN0WzBdfV1gKS5hZGRDbGFzcygnaGVhZGVyX19saW5rLS1jdXJyZW50Jyk7XG4gICAgfVxuICB9KTtcbn07XG5cbi8vIHNldCBoZWFkZXIgYmFja2dyb3VuZFxuY29uc3Qgc2V0SGVhZGVyID0gKCkgPT4ge1xuICBpZiAod2luZG93LnNjcm9sbFkgPCA1MCkge1xuICAgICQoJy5oZWFkZXInKS5yZW1vdmVDbGFzcygnaGVhZGVyLS1iZycpO1xuICB9IGVsc2Uge1xuICAgICQoJy5oZWFkZXInKS5hZGRDbGFzcygnaGVhZGVyLS1iZycpO1xuICB9XG59O1xuXG4vLyBzZXQgb25jZSBwYWdlIGlzIGxvYWRlZFxuc2V0TGlua3MoKTtcblxuLy8gZnVuY3Rpb24gY2FsbCBmcmVxdWVuY3kgbGF0ZW5jeSBmb3IgYmV0dGVyIHBlcmZvbWFuY2VcbmNvbnN0IGRlYm91bmNlID0gKGZ1bmN0aW9uKCl7XG4gIHZhciB0aW1lciA9IDA7XG4gIHJldHVybiBmdW5jdGlvbihjYWxsYmFjaywgbXMpe1xuICAgIGNsZWFyVGltZW91dCh0aW1lcik7XG4gICAgdGltZXIgPSBzZXRUaW1lb3V0KGNhbGxiYWNrLCBtcyk7XG4gIH07XG59KSgpO1xuXG4vLyBzZXQgb24gcGFnZSBzY3JvbGxcbiQod2luZG93KS5vbignc2Nyb2xsJywgKCkgPT4ge1xuICBkZWJvdW5jZShzZXRMaW5rcywgMzAwKTtcblxuICBzZXRIZWFkZXIoKTtcbn0pO1xuXG5cbmxldCBoZWFkZXJNb2JpbGVTaG93biA9IGZhbHNlO1xuXG4vLyBzY3JvbGwgdG8gc3BlY2lmaWMgc2VjdGlvblxuJCgnLmpzLXNjcm9sbHRvJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICQoJ2JvZHknKS5jc3Moe1xuICAgICdwb3NpdGlvbic6ICdzdGF0aWMnLFxuICAgICdtYXJnaW4tdG9wJzogJzAnXG4gIH0pO1xuXG4gIGhlYWRlck1vYmlsZVNob3duID0gZmFsc2U7XG5cbiAgJCgnLmhlYWRlcl9fYnVyZ2VyJykucmVtb3ZlQ2xhc3MoJ2hlYWRlcl9fYnVyZ2VyLS1hY3RpdmUnKTtcbiAgJCgnLmhlYWRlcl9fbW9iaWxlJykucmVtb3ZlQ2xhc3MoJ2hlYWRlcl9fbW9iaWxlLS1hY3RpdmUnKTtcblxuICAkKFtkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsIGRvY3VtZW50LmJvZHldKS5hbmltYXRlKHtcbiAgICBzY3JvbGxUb3A6ICQoYC4keyQodGhpcykuYXR0cignZGF0YS1zY3JvbGwnKX1gKS5vZmZzZXQoKS50b3AgLSAkKCcuaGVhZGVyJykuaW5uZXJIZWlnaHQoKVxuICB9LCA1MDApO1xufSk7XG5cbi8vIGhhbmRsaW5nIG1vYmlsZSBtZW51XG4kKCcuaGVhZGVyX19idXJnZXInKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICQodGhpcykudG9nZ2xlQ2xhc3MoJ2hlYWRlcl9fYnVyZ2VyLS1hY3RpdmUnKTtcbiAgJCgnLmhlYWRlcl9fbW9iaWxlJykudG9nZ2xlQ2xhc3MoJ2hlYWRlcl9fbW9iaWxlLS1hY3RpdmUnKTtcblxuICBoZWFkZXJNb2JpbGVTaG93biA9ICFoZWFkZXJNb2JpbGVTaG93bjtcblxuICBpZiAoaGVhZGVyTW9iaWxlU2hvd24pIHtcbiAgICBzY3JvbGwgPSB3aW5kb3cuc2Nyb2xsWTtcbiAgICAkKCdib2R5JykuY3NzKHtcbiAgICAgICdwb3NpdGlvbic6ICdmaXhlZCcsXG4gICAgICAnbWFyZ2luLXRvcCc6IC1zY3JvbGxcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICAkKCdib2R5JykuY3NzKHtcbiAgICAgICdwb3NpdGlvbic6ICdzdGF0aWMnLFxuICAgICAgJ21hcmdpbi10b3AnOiAnMCdcbiAgICB9KTtcblxuICAgIHdpbmRvdy5zY3JvbGxUbygwLCBzY3JvbGwpO1xuICB9XG59KTtcbiAgLy8gc2V0IGhlcm8gc2VjdGlvbiBwYXJhbGxheFxuY29uc3Qgc2V0SGVybyA9ICgpID0+IHtcbiAgaWYgKHdpbmRvdy5zY3JvbGxZIDwgd2luZG93LmlubmVySGVpZ2h0KSB7XG4gICAgJCgnLmhlcm8nKS5jc3MoJ3RyYW5zZm9ybScsIGB0cmFuc2xhdGVZKCR7LXdpbmRvdy5zY3JvbGxZIC8gNX1weClgKVxuICB9XG59O1xuXG4vLyBzZXQgb25jZSBwYWdlIGlzIGxvYWRlZFxuc2V0SGVhZGVyKCk7XG5cbi8vIHNldCBvbiBwYWdlIHNjcm9sbFxuaWYgKHdpbmRvdy5pbm5lcldpZHRoID49IDEyMDApIHtcbiAgJCh3aW5kb3cpLm9uKCdzY3JvbGwnLCAoKSA9PiB7XG4gICAgc2V0SGVybygpO1xuICB9KTtcbn1cblxuLy8gc2Nyb2xsIHRvIGNhbGMgc2VjdGlvblxuJCgnLmpzLXNjcm9sbC1jYWxjJykub24oJ2NsaWNrJywgZSA9PiB7XG4gIGUucHJldmVudERlZmF1bHQoKTtcbiAgJChbZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LCBkb2N1bWVudC5ib2R5XSkuYW5pbWF0ZSh7XG4gICAgc2Nyb2xsVG9wOiAkKCcuY2FsYycpLm9mZnNldCgpLnRvcCAtICQoJy5oZWFkZXInKS5pbm5lckhlaWdodCgpIC0gMzBcbiAgfSwgNTAwKTtcbn0pO1xuXG4vLyB0b2dnbGUgaGVybyB2aWRlbyBwb3B1cFxuJCgnLmhlcm9fX3BsYXknKS5vbignY2xpY2snLCAoKSA9PiB7XG4gIHNjcm9sbCA9IHdpbmRvdy5zY3JvbGxZO1xuXG4gICQoJ2JvZHknKS5jc3Moe1xuICAgICdwb3NpdGlvbic6ICdmaXhlZCcsXG4gICAgJ21hcmdpbi10b3AnOiAtc2Nyb2xsXG4gIH0pO1xuXG4gICQoJy5oZXJvLXBvcHVwX193aW5kb3cnKS5hcHBlbmQoJzxpZnJhbWUgd2lkdGg9XCIxMDAlXCIgaGVpZ2h0PVwiMTAwJVwiIHNyYz1cImh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL2VtYmVkL292VU1WVmdNYURVP2F1dG9wbGF5PTFcIiBmcmFtZWJvcmRlcj1cIjBcIiBhbGxvdz1cImFjY2VsZXJvbWV0ZXI7IGF1dG9wbGF5OyBlbmNyeXB0ZWQtbWVkaWE7IGd5cm9zY29wZTsgcGljdHVyZS1pbi1waWN0dXJlXCIgYWxsb3dmdWxsc2NyZWVuKT4nKVxuICAkKCcuaGVyby1wb3B1cCcpLmZhZGVJbigzMDApO1xufSk7XG5cbi8vIGNsb3NlIGhlcm8gdmlkZW8gcG9wdXBcbiQoJy5oZXJvLXBvcHVwX19jbG9zZScpLm9uKCdjbGljaycsICgpID0+IHtcbiAgJCgnYm9keScpLmNzcyh7XG4gICAgJ3Bvc2l0aW9uJzogJ3N0YXRpYycsXG4gICAgJ21hcmdpbi10b3AnOiAnMCdcbiAgfSk7XG5cbiAgd2luZG93LnNjcm9sbFRvKDAsIHNjcm9sbCk7XG5cbiAgJCgnLmhlcm8tcG9wdXAnKS5mYWRlT3V0KDMwMCk7XG4gICQoJy5oZXJvLXBvcHVwIGlmcmFtZScpLnJlbW92ZSgpO1xufSk7XG4gIC8vIG51bWJlciBhbmltYXRpb24gZnVuY3Rpb25cbmNvbnN0IGFuaW1hdGVWYWx1ZSA9IChzZWxlY3Rvciwgc3RhcnQsIGVuZCwgZHVyYXRpb24sIHBlcmNlbnQgPSBmYWxzZSkgPT4ge1xuICBsZXQgY3VycmVudCA9IHN0YXJ0O1xuICBjb25zdCByYW5nZSA9IGVuZCAtIHN0YXJ0O1xuICBjb25zdCBpbmNyZW1lbnQgPSBlbmQgPiBzdGFydCA/IChyYW5nZSAvIGR1cmF0aW9uKSA6IChyYW5nZSAvIGR1cmF0aW9uKTtcbiAgY29uc3Qgc3RlcFRpbWUgPSBNYXRoLmFicyhNYXRoLmZsb29yKGR1cmF0aW9uIC8gcmFuZ2UpKTtcbiAgY29uc3QgdGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHtcbiAgICAgIGN1cnJlbnQgKz0gaW5jcmVtZW50O1xuICAgICAgJChzZWxlY3RvcikudGV4dChwZXJjZW50ID8gJzAsJyArIE1hdGguZmxvb3IoY3VycmVudCkudG9TdHJpbmcoKS5yZXBsYWNlKC9cXEIoPz0oXFxkezN9KSsoPyFcXGQpKS9nLCBcIiBcIikgKyAnJScgOiBNYXRoLmZsb29yKGN1cnJlbnQpLnRvU3RyaW5nKCkucmVwbGFjZSgvXFxCKD89KFxcZHszfSkrKD8hXFxkKSkvZywgXCIgXCIpKTtcbiAgICAgIGlmIChNYXRoLmZsb29yKGN1cnJlbnQpID09IGVuZCkge1xuICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXIpO1xuICAgICAgfVxuICB9LCBzdGVwVGltZSk7XG59O1xuXG4vLyBzZXQgd2hldGhlciBzcGVjaWZpYyAgaXRlbXMgYXJlIGFscmVhZHkgYW5pbWF0ZWRcbmxldCBkZXBvc2l0SXNBbmltYXRlZCA9IGZhbHNlO1xubGV0IHN0YXRzQXJlQW5pbWF0ZWQgPSBmYWxzZTtcblxuJCh3aW5kb3cpLm9uKCdzY3JvbGwnLCAoKSA9PiB7XG4gIC8vIGFuaW1hdGUgY2hhcnQgYXBwZWFyaW5nIHdoaWxlIHNjcm9sbGluZ1xuICBjb25zdCBjaGFydFRvcCA9ICQoJy5jYWxjX19jaGFydCcpLm9mZnNldCgpLnRvcDtcbiAgY29uc3Qgc2Nyb2xsV2l0aFdpbmRvdyA9IHdpbmRvdy5zY3JvbGxZICsgd2luZG93LmlubmVySGVpZ2h0ICogMS4yO1xuICBpZiAoc2Nyb2xsV2l0aFdpbmRvdyA+PSBjaGFydFRvcCAmJiAod2luZG93LnNjcm9sbFkgLSB3aW5kb3cuaW5uZXJIZWlnaHQgLyAxLjIpIC8gMyA8PSAoY2hhcnRUb3AgKyB3aW5kb3cuaW5uZXJIZWlnaHQgLyAxLjIpIC8gMykge1xuICAgIGNvbnN0IHByb2dyZXNzID0gKChzY3JvbGxXaXRoV2luZG93KSAtIChjaGFydFRvcCArIHdpbmRvdy5pbm5lckhlaWdodCAvIDEuMikpIC8gMztcbiAgICAkKCcuY2FsY19fY2hhcnQnKS5jc3MoJ3dpZHRoJywgKHByb2dyZXNzIDw9IDEwMCA/IHByb2dyZXNzIDogMTAwKSArICd2dycpXG4gIH1cblxuICAvLyBhbmltYXRlIGl0ZW1zIHdoZW4gdXNlciBzY3JvbGxlZCB0byB0aGVtXG4gIGlmICghZGVwb3NpdElzQW5pbWF0ZWQgJiYgc2Nyb2xsV2l0aFdpbmRvdyAtIDEwMCA+PSAkKCcuY2FsY3VsYXRvcl9fdG90YWwgc3BhbicpLm9mZnNldCgpLnRvcCkge1xuICAgIGFuaW1hdGVWYWx1ZSgnLmNhbGN1bGF0b3JfX3RvdGFsIHNwYW4nLCAxMDAwMDAsIDAsIDIyKTtcbiAgICBkZXBvc2l0SXNBbmltYXRlZCA9IHRydWU7XG4gIH1cbiAgXG4gIGlmICghc3RhdHNBcmVBbmltYXRlZCAmJiBzY3JvbGxXaXRoV2luZG93IC0gMTAwID49ICQoJy5jYWxjX19zdGF0cy1jb2wnKS5vZmZzZXQoKS50b3ApIHtcbiAgICBhbmltYXRlVmFsdWUoJy5jYWxjX19zdGF0cy1jb2w6bnRoLWNoaWxkKDEpIC5jYWxjX19zdGF0cy1oZWFkJywgMCwgMzMsIDMzLCB0cnVlKTtcbiAgICBhbmltYXRlVmFsdWUoJy5jYWxjX19zdGF0cy1jb2w6bnRoLWNoaWxkKDIpIC5jYWxjX19zdGF0cy1oZWFkJywgMCwgMTc4OSwgMjApO1xuICAgIGFuaW1hdGVWYWx1ZSgnLmNhbGNfX3N0YXRzLWNvbDpudGgtY2hpbGQoMykgLmNhbGNfX3N0YXRzLWhlYWQnLCAwLCAxMTY1LCAyMCk7XG4gICAgc3RhdHNBcmVBbmltYXRlZCA9IHRydWU7XG4gIH1cbn0pO1xuICAvLyBtYXNrIGZvciBkZXBvc2l0IGlucHV0XG5uZXcgQXV0b051bWVyaWMoJy5jYWxjdWxhdG9yX19pbnB1dCBbbmFtZT1cImRlcG9zaXRcIl0nLCB7XG4gIGFTZXA6ICcgJyxcbiAgZGVjaW1hbFBsYWNlczogMFxufSk7XG5cbi8vIG1hc2sgZm9yIHRlcm0gaW5wdXRcbm5ldyBBdXRvTnVtZXJpYygnLmNhbGN1bGF0b3JfX2lucHV0IFtuYW1lPVwidGVybVwiXScsIHtcbiAgYVNlcDogJyAnLFxuICBkZWNpbWFsUGxhY2VzOiAwXG59KTtcblxubGV0IGRlcG9zaXQgPSAwO1xubGV0IHRlcm0gPSAwO1xubGV0IHByb2ZpdCA9IDIuNTtcblxuLy8gY2FsY3VsYXRlIHRvdGFsIGRlcG9zaXRcbmNvbnN0IGNhbGN1bGF0ZSA9ICgpID0+IHtcbiAgY29uc3QgdmFsdWUgPSBwYXJzZUludChkZXBvc2l0ICogKHByb2ZpdCAvIDEwMCkgKiAzMCAqIHRlcm0gKyBkZXBvc2l0KTtcbiAgJCgnLmNhbGN1bGF0b3JfX3RvdGFsIHNwYW4nKS50ZXh0KHZhbHVlLnRvU3RyaW5nKCkucmVwbGFjZSgvXFxCKD89KFxcZHszfSkrKD8hXFxkKSkvZywgXCIgXCIpKTtcbn07XG5cbi8vIHJlY2FsY3VsYXRlIHRvdGFsIGRlcG9zaXQgd2hlbiB1c2VyIGNoYW5nZSBkYXRhXG4kKCcuY2FsY3VsYXRvcl9faW5wdXQgaW5wdXQnKS5vbignaW5wdXQnLCBmdW5jdGlvbiAoKSB7XG4gIGlmICgkKHRoaXMpLmF0dHIoJ25hbWUnKSA9PT0gJ2RlcG9zaXQnKSB7XG4gICAgZGVwb3NpdCA9ICskKHRoaXMpLnZhbCgpLnJlcGxhY2UoLyAvZywgJycpO1xuICB9XG4gIGlmICgkKHRoaXMpLmF0dHIoJ25hbWUnKSA9PT0gJ3Rlcm0nKSB7XG4gICAgdGVybSA9ICskKHRoaXMpLnZhbCgpLnJlcGxhY2UoLyAvZywgJycpO1xuICB9XG5cbiAgY2FsY3VsYXRlKCk7XG59KTtcblxuLy8gcmVjYWxjdWxhdGUgdG90YWwgZGVwb3NpdCB3aGVuIHVzZXIgY2hhbmdlIHByb2ZpdCB2YWx1ZVxuJCgnLmpzLXJhbmdlJykuaW9uUmFuZ2VTbGlkZXIoe1xuICB0eXBlOiAnc2luZ2xlJyxcbiAgbWF4OiA1LFxuICBtaW46IDAsXG4gIGZyb206IDIuNSxcbiAgc3RlcDogMC4xLFxuICBvbkNoYW5nZTogZGF0YSA9PiB7XG4gICAgY29uc3QgdmFsID0gZGF0YS5pbnB1dFswXS52YWx1ZTtcbiAgICBwcm9maXQgPSArdmFsO1xuICAgIGNhbGN1bGF0ZSgpO1xuXG4gICAgJCgnLmlycy1zaW5nbGUnKS5zaG93KCk7XG4gICAgJCgnLmNhbGN1bGF0b3JfX2dyaWQtaXRlbScpLm1hcChlbCA9PiB7XG4gICAgICBpZiAoK3ZhbCA+PSArZWwpIHtcbiAgICAgICAgJChgLmNhbGN1bGF0b3JfX2dyaWQtaXRlbTplcSgke2VsfSlgKS5hZGRDbGFzcygnY2FsY3VsYXRvcl9fZ3JpZC1pdGVtLS1jaGVjaycpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJChgLmNhbGN1bGF0b3JfX2dyaWQtaXRlbTplcSgke2VsfSlgKS5yZW1vdmVDbGFzcygnY2FsY3VsYXRvcl9fZ3JpZC1pdGVtLS1jaGVjaycpO1xuICAgICAgfVxuICAgIH0pO1xuICB9LFxuICBvbkZpbmlzaDogKCkgPT4ge1xuICAgICQoJy5pcnMtc2luZ2xlJykuaGlkZSgpO1xuICB9XG59KTtcbiAgLy8gc2V0IGZlZWRiYWNrIHNsaWRlciBvbiBtb2JpbGUgZGV2aWNlc1xuaWYgKCQod2luZG93KS5pbm5lcldpZHRoKCkgPCAxMjAwKSB7XG4gIGNvbnN0IGZlZWRiYWNrU2xpZGVyID0gbmV3IFN3aXBlcignLmZlZWRiYWNrX19ncmlkJywge1xuICAgIGRpcmVjdGlvbjogJ2hvcml6b250YWwnLFxuICAgIHNwZWVkOiA1MDAsXG4gICAgd3JhcHBlckNsYXNzOiAnZmVlZGJhY2tfX3JvdycsXG4gICAgc2xpZGVDbGFzczogJ2ZlZWRiYWNrX192aWRlbycsXG4gICAgc3BhY2VCZXR3ZWVuOiAzMCxcbiAgICBsb29wOiB0cnVlLFxuICAgIHBhZ2luYXRpb246IHtcbiAgICAgIGVsOiAnLmZlZWRiYWNrX19wYWdpbmF0aW9uJyxcbiAgICAgIGNsaWNrYWJsZTogdHJ1ZSxcbiAgICB9XG4gIH0pO1xufVxuICAvLyBzZXQgc2xpZGVycyBkZXBlbmRpbmcgb24gZGV2aWNlXG5pZiAoJCh3aW5kb3cpLmlubmVyV2lkdGgoKSA8IDEyMDApIHtcbiAgY29uc3Qgc2xpZGVyID0gbmV3IFN3aXBlcignLnNsaWRlcl9fY29udGFpbmVyJywge1xuICAgIGRpcmVjdGlvbjogJ2hvcml6b250YWwnLFxuICAgIHNwZWVkOiA1MDAsXG4gICAgd3JhcHBlckNsYXNzOiAnc2xpZGVyX193cmFwcGVyJyxcbiAgICBzbGlkZUNsYXNzOiAnc2xpZGVyX19zbGlkZScsXG4gICAgc3BhY2VCZXR3ZWVuOiAzMCxcbiAgICBsb29wOiB0cnVlLFxuICAgIHNwYWNlQmV0d2VlbjogMzAsXG4gICAgcGFnaW5hdGlvbjoge1xuICAgICAgZWw6ICcuc2xpZGVyX19wYWdpbmF0aW9uJyxcbiAgICAgIGNsaWNrYWJsZTogdHJ1ZSxcbiAgICB9XG4gIH0pO1xufSBlbHNlIHtcbiAgY29uc3Qgc2xpZGVyID0gbmV3IFN3aXBlcignLnNsaWRlcl9fY29udGFpbmVyJywge1xuICAgIGRpcmVjdGlvbjogJ3ZlcnRpY2FsJyxcbiAgICBzcGVlZDogNTAwLFxuICAgIHdyYXBwZXJDbGFzczogJ3NsaWRlcl9fd3JhcHBlcicsXG4gICAgc2xpZGVDbGFzczogJ3NsaWRlcl9fc2xpZGUnLFxuICAgIHNwYWNlQmV0d2VlbjogMzAsXG4gICAgbG9vcDogdHJ1ZSxcbiAgICBhdXRvcGxheToge1xuICAgICAgZGVsYXk6IDMwMDAsXG4gICAgICBkaXNhYmxlT25JbnRlcmFjdGlvbjogZmFsc2UsXG4gICAgfSxcbiAgICBwYWdpbmF0aW9uOiB7XG4gICAgICBlbDogJy5zbGlkZXJfX3BhZ2luYXRpb24nLFxuICAgICAgY2xpY2thYmxlOiB0cnVlLFxuICAgIH1cbiAgfSk7XG59XG4gIC8vIHRvZ2dsaW5nIGZhcSBpdGVtc1xuJCgnLmZhcS1pdGVtX19oZWFkJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICBpZiAoJCh0aGlzKS5oYXNDbGFzcygnZmFxLWl0ZW1fX2hlYWQtLW9wZW5lZCcpKSB7XG4gICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnZmFxLWl0ZW1fX2hlYWQtLW9wZW5lZCcpO1xuICB9IGVsc2Uge1xuICAgICQoJy5mYXEtaXRlbV9faGVhZC0tb3BlbmVkJykubmV4dCgpLnNsaWRlVXAoMzAwKTtcbiAgICAkKCcuZmFxLWl0ZW1fX2hlYWQtLW9wZW5lZCcpLnJlbW92ZUNsYXNzKCdmYXEtaXRlbV9faGVhZC0tb3BlbmVkJyk7XG4gICAgJCh0aGlzKS5hZGRDbGFzcygnZmFxLWl0ZW1fX2hlYWQtLW9wZW5lZCcpO1xuICB9XG4gICQodGhpcykubmV4dCgpLnNsaWRlVG9nZ2xlKDMwMCk7XG59KTtcbiAgLy8gc2hvdyBwb3B1cFxuJCgnLmpzLW9wZW4tcG9wdXAnKS5vbignY2xpY2snLCBlID0+IHtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gIHNjcm9sbCA9IHdpbmRvdy5zY3JvbGxZO1xuXG4gICQoJ2JvZHknKS5jc3Moe1xuICAgICdwb3NpdGlvbic6ICdmaXhlZCcsXG4gICAgJ21hcmdpbi10b3AnOiAtc2Nyb2xsXG4gIH0pO1xuICBcbiAgJCgnLnBvcHVwJykuZmFkZUluKDMwMCk7XG59KTtcblxuLy8gY2xvc2UgcG9wdXBcbiQoJy5wb3B1cF9fY2xvc2UnKS5vbignY2xpY2snLCAoKSA9PiB7XG4gICQoJ2JvZHknKS5jc3Moe1xuICAgICdwb3NpdGlvbic6ICdzdGF0aWMnLFxuICAgICdtYXJnaW4tdG9wJzogJzAnXG4gIH0pO1xuXG4gIHdpbmRvdy5zY3JvbGxUbygwLCBzY3JvbGwpO1xuXG4gICQoJy5wb3B1cCcpLmZhZGVPdXQoMzAwKTtcbn0pO1xuXG4vLyBzZW5kIHBvcHVwIGZvcm1cbiQoJy5qcy1zZW5kLXRlbCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gIGUucHJldmVudERlZmF1bHQoKTtcblxuICAkKHRoaXMpLmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XG4gICQodGhpcykuc2libGluZ3MoJy5pbnB1dF9fZmllbGQnKS5hdHRyKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuICAkKCcucG9wdXBfX2NvZGUgaW5wdXQnKS5yZW1vdmVBdHRyKCdkaXNhYmxlZCcpO1xuICAkKCcuanMtc2VuZC1mb3JtJykucmVtb3ZlQXR0cignZGlzYWJsZWQnKTtcbn0pO1xuXG59XG4iXX0=
