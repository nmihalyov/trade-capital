function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}window.onload=function(){var t=0;new WOW({boxClass:"js-wow"}).init();function e(e){e<1200?$('meta[name="viewport"]').attr("content","width=320"):$('meta[name="viewport"]').attr("content","width=device-width, initial-scale=1, user-scalable=no")}e($(window).innerWidth()),$(window).resize(function(){e($(window).innerWidth())}),1200<=window.innerWidth&&(particlesJS.load("why-particles","js/particles.json"),particlesJS.load("demo-particles","js/particles.json")),particlesJS.load("faq-particles","js/particles.json"),$(".js-play-video").on("click",function(){var e=$(this).attr("data-id");$(this).parent().hasClass("video--local")?$(this).parent().find("video").trigger("play"):$(this).parent().append('<iframe width="570" height="285" src="https://www.youtube.com/embed/'+e+'?autoplay=1" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen)>'),$(this).hide()}),$(document).ready(function(){var e=$(".video--local").attr("data-url");$(".video--local").append('<video width="570" height="285" controls="" class="embed-responsive-item" data-mp4="true" id="mautic-player-0">\n    <source src='+e+' type="video/mp4">\n  </video>')}),$(".input__field").on("focus",function(){$(this).parent().addClass("input--focused")}).on("blur",function(){$(this).parent().removeClass("input--focused")}),$(".input__field").on("change",function(){""!==$(this).val()?$(this).parent().addClass("input--filled"):$(this).parent().removeClass("input--filled")}),$(".input--tel .input__field").inputmask("8 999 999 99 99"),$(".input--tel .input__field").on("input",function(){var e=$(this).val();""===e||/_/g.test(e)?$(this).siblings(".js-send-tel").attr("disabled","disabled"):$(this).siblings(".js-send-tel").removeAttr("disabled")}),$(".input--code .input__field").inputmask("9999");function i(){o.map(function(e){e.offset().top<=window.scrollY+$(".header").innerHeight()+30&&($(".header__link--current").removeClass("header__link--current"),$(".header__link[data-scroll="+e[0].classList[0]+"]").addClass("header__link--current"))})}function a(){window.scrollY<50?$(".header").removeClass("header--bg"):$(".header").addClass("header--bg")}var o=[$(".page-wrapper"),$(".why"),$(".about"),$(".faq")];i();var n,l=(n=0,function(e,t){clearTimeout(n),n=setTimeout(e,t)});$(window).on("scroll",function(){l(i,300),a()});var r=!1;$(".js-scrollto").on("click",function(e){e.preventDefault(),$("body").css({position:"static","margin-top":"0"}),r=!1,$(".header__burger").removeClass("header__burger--active"),$(".header__mobile").removeClass("header__mobile--active"),$([document.documentElement,document.body]).animate({scrollTop:$("."+$(this).attr("data-scroll")).offset().top-$(".header").innerHeight()},500)}),$(".header__burger").on("click",function(){$(this).toggleClass("header__burger--active"),$(".header__mobile").toggleClass("header__mobile--active"),(r=!r)?(t=window.scrollY,$("body").css({position:"fixed","margin-top":-t})):($("body").css({position:"static","margin-top":"0"}),window.scrollTo(0,t))});a(),1200<=window.innerWidth&&$(window).on("scroll",function(){window.scrollY<window.innerHeight&&$(".hero").css("transform","translateY("+-window.scrollY/5+"px)")}),$(".js-scroll-calc").on("click",function(e){e.preventDefault(),$([document.documentElement,document.body]).animate({scrollTop:$(".calc").offset().top-$(".header").innerHeight()-30},500)}),$(".hero__play").on("click",function(){t=window.scrollY,$("body").css({position:"fixed","margin-top":-t}),$(".hero-popup__window").append('<iframe width="100%" height="100%" src="https://www.youtube.com/embed/ovUMVVgMaDU?autoplay=1" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen)>'),$(".hero-popup").fadeIn(300)}),$(".hero-popup__close").on("click",function(){$("body").css({position:"static","margin-top":"0"}),window.scrollTo(0,t),$(".hero-popup").fadeOut(300),$(".hero-popup iframe").remove()});function s(e,t,i,a,o){var n=4<arguments.length&&void 0!==o&&o,l=t,r=i-t,s=r/a,c=Math.abs(Math.floor(a/r)),d=setInterval(function(){l+=s,$(e).text(n?"0,"+Math.floor(l).toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")+"%":Math.floor(l).toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")),Math.floor(l)==i&&clearInterval(d)},c)}var c=!1,d=!1;$(window).on("scroll",function(){var e=$(".calc__chart").offset().top,t=window.scrollY+window.innerHeight;if(e<=t&&(window.scrollY-window.innerHeight/1.5)/3<=(e+window.innerHeight/1.5)/3){var i=(t-(e+window.innerHeight/1.5))/3;$(".calc__chart").css("width",(i<=100?i:100)+"vw")}!c&&t-50>=$(".calculator__total span").offset().top&&(s(".calculator__total span",1e5,0,22),c=!0),!d&&t-50>=$(".calc__stats-col").offset().top&&(s(".calc__stats-col:nth-child(1) .calc__stats-head",0,33,33,!0),s(".calc__stats-col:nth-child(2) .calc__stats-head",0,1789,20),s(".calc__stats-col:nth-child(3) .calc__stats-head",0,1165,20),d=!0)}),new AutoNumeric('.calculator__input [name="deposit"]',{aSep:" ",decimalPlaces:0}),new AutoNumeric('.calculator__input [name="term"]',{aSep:" ",decimalPlaces:0});function p(){var e=parseInt(u*(h/100)*30*_+u);$(".calculator__total span").text(e.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "))}var u=0,_=0,h=2.5;if($(".calculator__input input").on("input",function(){"deposit"===$(this).attr("name")&&(u=+$(this).val().replace(/ /g,"")),"term"===$(this).attr("name")&&(_=+$(this).val().replace(/ /g,"")),p()}),$(".js-range").ionRangeSlider({type:"single",max:5,min:0,from:2.5,step:.1,onChange:function(e){var t=e.input[0].value;h=+t,p(),$(".irs-single").show(),$(".calculator__grid-item").map(function(e){+e<=+t?$(".calculator__grid-item:eq("+e+")").addClass("calculator__grid-item--check"):$(".calculator__grid-item:eq("+e+")").removeClass("calculator__grid-item--check")})},onFinish:function(){$(".irs-single").hide()}}),$(window).innerWidth()<1200)new Swiper(".feedback__grid",{direction:"horizontal",speed:500,wrapperClass:"feedback__row",slideClass:"feedback__video",spaceBetween:30,loop:!0,pagination:{el:".feedback__pagination",clickable:!0}});if($(window).innerWidth()<1200){var w;new Swiper(".slider__container",(_defineProperty(w={direction:"horizontal",speed:500,wrapperClass:"slider__wrapper",slideClass:"slider__slide",spaceBetween:30,loop:!0},"spaceBetween",30),_defineProperty(w,"pagination",{el:".slider__pagination",clickable:!0}),w))}else new Swiper(".slider__container",{direction:"vertical",speed:500,wrapperClass:"slider__wrapper",slideClass:"slider__slide",spaceBetween:30,loop:!0,autoplay:{delay:3e3,disableOnInteraction:!1},pagination:{el:".slider__pagination",clickable:!0}});$(".faq-item__head").on("click",function(){$(this).hasClass("faq-item__head--opened")?$(this).removeClass("faq-item__head--opened"):($(".faq-item__head--opened").next().slideUp(300),$(".faq-item__head--opened").removeClass("faq-item__head--opened"),$(this).addClass("faq-item__head--opened")),$(this).next().slideToggle(300)}),$(".js-open-popup").on("click",function(e){e.preventDefault(),t=window.scrollY,$("body").css({position:"fixed","margin-top":-t}),$(".popup").fadeIn(300)}),$(".popup__close").on("click",function(){$("body").css({position:"static","margin-top":"0"}),window.scrollTo(0,t),$(".popup").fadeOut(300)}),$(".js-send-tel").on("click",function(e){e.preventDefault(),$(this).attr("disabled","disabled"),$(this).siblings(".input__field").attr("disabled","disabled"),$(".popup__code input").removeAttr("disabled"),$(".js-send-form").removeAttr("disabled")})};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1vbi5qcyJdLCJuYW1lcyI6WyJ3aW5kb3ciLCJvbmxvYWQiLCJzY3JvbGwiLCJXT1ciLCJib3hDbGFzcyIsImluaXQiLCJ3aWR0aCIsIiQiLCJzZXRSZXNwb25zaXZlIiwiYXR0ciIsImlubmVyV2lkdGgiLCJyZXNpemUiLCJwYXJ0aWNsZXNKUyIsImxvYWQiLCJvbiIsIklEIiwidGhpcyIsInBhcmVudCIsInRyaWdnZXIiLCJhcHBlbmQiLCJoaWRlIiwiZG9jdW1lbnQiLCJyZWFkeSIsIlVSTCIsImFkZENsYXNzIiwicmVtb3ZlQ2xhc3MiLCJ2YWwiLCJpbnB1dG1hc2siLCJ0ZXN0Iiwic2libGluZ3MiLCJyZW1vdmVBdHRyIiwic2V0TGlua3MiLCJzZWN0aW9ucyIsIm1hcCIsImVsIiwib2Zmc2V0IiwidG9wIiwidG9wT2Zmc2V0IiwiaW5uZXJIZWlnaHQiLCJjbGFzc0xpc3QiLCJzZXRIZWFkZXIiLCJ0aW1lciIsImRlYm91bmNlIiwiY2FsbGJhY2siLCJjbGVhclRpbWVvdXQiLCJzZXRUaW1lb3V0IiwibXMiLCJoZWFkZXJNb2JpbGVTaG93biIsImUiLCJwcmV2ZW50RGVmYXVsdCIsImNzcyIsInBvc2l0aW9uIiwibWFyZ2luLXRvcCIsInNjcm9sbFRvcCIsImJvZHkiLCJhbmltYXRlIiwidG9nZ2xlQ2xhc3MiLCJzY3JvbGxZIiwic2Nyb2xsVG8iLCJzZXRIZXJvIiwiZmFkZUluIiwiZmFkZU91dCIsInJlbW92ZSIsImFuaW1hdGVWYWx1ZSIsInNlbGVjdG9yIiwic3RhcnQiLCJlbmQiLCJkdXJhdGlvbiIsInBlcmNlbnQiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJjdXJyZW50IiwicmFuZ2UiLCJpbmNyZW1lbnQiLCJmbG9vciIsInN0ZXBUaW1lIiwiTWF0aCIsInNldEludGVydmFsIiwidG9TdHJpbmciLCJyZXBsYWNlIiwidGV4dCIsImRlcG9zaXRJc0FuaW1hdGVkIiwic3RhdHNBcmVBbmltYXRlZCIsImNoYXJ0VG9wIiwic2Nyb2xsV2l0aFdpbmRvdyIsIkF1dG9OdW1lcmljIiwiYVNlcCIsImNhbGN1bGF0ZSIsImRlcG9zaXQiLCJwcm9maXQiLCJ0ZXJtIiwiaW9uUmFuZ2VTbGlkZXIiLCJ0eXBlIiwibWF4IiwibWluIiwiZnJvbSIsInN0ZXAiLCJkYXRhIiwib25DaGFuZ2UiLCJpbnB1dCIsInZhbHVlIiwic2hvdyIsIm9uRmluaXNoIiwiU3dpcGVyIiwiZGlyZWN0aW9uIiwiZmVlZGJhY2tTbGlkZXIiLCJzcGVlZCIsIndyYXBwZXJDbGFzcyIsInNsaWRlQ2xhc3MiLCJzcGFjZUJldHdlZW4iLCJsb29wIiwicGFnaW5hdGlvbiIsIl9yZWYiLCJjbGlja2FibGUiLCJzbGlkZXIiLCJhdXRvcGxheSIsImRlbGF5IiwiaGFzQ2xhc3MiLCJuZXh0Iiwic2xpZGVVcCIsInNsaWRlVG9nZ2xlIl0sIm1hcHBpbmdzIjoic0lBQUFBLE9BQU9DLE9BQVMsV0FBaEJELElBQUFBLEVBQUEsRUFFTUUsSUFBWUMsSUFBQSxDQUdoQkMsU0FBVSxXQURWQyxPQUlGLFNBQUlBLEVBQUpDLEdBQ0VBLEVBQUEsS0FDRkMsRUFBTUMseUJBQUFBLEtBQUFBLFVBQWdCLGFBRWxCRCxFQUFBQSx5QkFBQUUsS0FBMkJBLFVBQTNCLHlEQU9KRCxFQUFjRCxFQUFFUCxRQUFRVSxjQUd4QkgsRUFBRVAsUUFBUVcsT0FBTyxXQURqQkgsRUFBQUQsRUFBQVAsUUFBQVUsZ0JBQ0EsTUFBQVYsT0FBQVUsYUFHRUUsWUFBQUMsS0FBQSxnQkFBQSxxQkFDRkQsWUFBV0YsS0FBQUEsaUJBQW9CLHNCQUU3QkUsWUFBQUEsS0FBWUMsZ0JBQUsscUJBS25CTixFQUFFLGtCQUFrQk8sR0FBRyxRQUFTLFdBRDlCLElBQUFDLEVBQUFSLEVBQUFTLE1BQUFQLEtBQUEsV0FDQUYsRUFBQVMsTUFBQUMsU0FBa0JILFNBQXBCLGdCQUNFUCxFQUFBUyxNQUFNRCxTQUFhTixLQUFLLFNBQWJTLFFBQVgsUUFFRVgsRUFBQUEsTUFBQVUsU0FBQUUsT0FBQVosdUVBQUFRLEVB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QVBvQyxDQVc5Q0EsR0FBQUEsc0JBQ0U5RSxXQUFJLEtBS1IzQixFQUFBLG1CQUFBTyxHQUFBLFFBQUEsV0FDQVAsRUFBQVMsTUFBQXNHLFNBQW1CeEcsMEJBQ25CUCxFQUFBUyxNQUFNUyxZQUFGLDJCQUVIbEIsRUFGRCwyQkFFT2dILE9BQUFDLFFBQUEsS0FDTGpILEVBQUFBLDJCQUFBa0IsWUFBb0MrRiwwQkFDcENqSCxFQUFBQSxNQUFFaUIsU0FBQSwyQkFFSGpCLEVBQUFTLE1BQUF1RyxPQUFBRSxZQUFBLE9BR0RsSCxFQUFBLGtCQUFBTyxHQUFBLFFBQUEsU0FBQWtDLEdBQ0Z6QyxFQUFFMEMsaUJBR0EvQyxFQUFTRixPQUFPeUQsUUFFaEJsRCxFQUFFLFFBQVEyQyxJQUFJLENBQWQzQyxTQUFVMkMsUUFDUkUsY0FBWWxELElBSWRLLEVBQUUsVUFBVXFELE9BQU8sT0FHckJyRCxFQUFBLGlCQUFBTyxHQUFBLFFBQUEsV0FDQVAsRUFBRSxRQUFBMkMsSUFBQSxDQUNBM0MsU0FBVTJDLFNBQ1JFLGFBQVksTUFJZHBELE9BQU8wRCxTQUFTLEVBQUd4RCxHQUVuQkssRUFBRSxVQUFVc0QsUUFBUSxPQUd0QnRELEVBQUEsZ0JBQUFPLEdBQUEsUUFBQSxTQUFBa0MsR0FDQXpDLEVBQUUwQyxpQkFHQTFDLEVBQUVTLE1BQU1QLEtBQUssV0FBWSxZQUF6QkYsRUFBQUEsTUFBQXNCLFNBQWEsaUJBQVlwQixLQUF6QixXQUFBLFlBQ0FGLEVBQUFBLHNCQUFpQnVCLFdBQWpCLFlBQ0F2QixFQUFBQSxpQkFBRXVCLFdBQXNCQSIsImZpbGUiOiJjb21tb24ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsid2luZG93Lm9ubG9hZCA9ICgpID0+IHtcblxuICBsZXQgc2Nyb2xsID0gMDsgLy8gaGVhZGVyLCBoZXJvLCBwb3B1cFxuXG4gIGNvbnN0IHdvdyA9IG5ldyBXT1coe1xuICBib3hDbGFzczogJ2pzLXdvdydcbn0pO1xuXG53b3cuaW5pdCgpO1xuICAvLyBzZXR0aW5nIHZpZXdwb3J0IG1ldGEgdGFnXG5jb25zdCBzZXRSZXNwb25zaXZlID0gd2lkdGggPT4ge1xuICBpZiAod2lkdGggPCAxMjAwKSB7XG4gICAgJCgnbWV0YVtuYW1lPVwidmlld3BvcnRcIl0nKS5hdHRyKCdjb250ZW50JywgJ3dpZHRoPTMyMCcpO1xuICB9IGVsc2Uge1xuICAgICQoJ21ldGFbbmFtZT1cInZpZXdwb3J0XCJdJykuYXR0cignY29udGVudCcsICd3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MSwgdXNlci1zY2FsYWJsZT1ubycpO1xuICB9XG59O1xuXG4vLyBzZXQgb25jZSBwYWdlIGlzIGxvYWRlZFxuc2V0UmVzcG9uc2l2ZSgkKHdpbmRvdykuaW5uZXJXaWR0aCgpKTtcblxuLy8gc2V0IG9uIHJlc2l6ZVxuJCh3aW5kb3cpLnJlc2l6ZSgoKSA9PiB7XG4gIHNldFJlc3BvbnNpdmUoJCh3aW5kb3cpLmlubmVyV2lkdGgoKSk7XG59KTtcbiAgLy8gbG9hZCBwYXJ0aWNsZXMgZGF0YSBmb3IgYW5pbWF0ZWQgc2VjdGlvbnNcbmlmICh3aW5kb3cuaW5uZXJXaWR0aCA+PSAxMjAwKSB7XG4gIHBhcnRpY2xlc0pTLmxvYWQoJ3doeS1wYXJ0aWNsZXMnLCAnanMvcGFydGljbGVzLmpzb24nKTtcbiAgcGFydGljbGVzSlMubG9hZCgnZGVtby1wYXJ0aWNsZXMnLCAnanMvcGFydGljbGVzLmpzb24nKTtcbn1cbnBhcnRpY2xlc0pTLmxvYWQoJ2ZhcS1wYXJ0aWNsZXMnLCAnanMvcGFydGljbGVzLmpzb24nKTtcblxuICAvLyBzaG93IHlvdXR1YmUgdmlkZW8gcGxheWVyXG4kKCcuanMtcGxheS12aWRlbycpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgY29uc3QgSUQgPSAkKHRoaXMpLmF0dHIoJ2RhdGEtaWQnKVxuICBpZiAoJCh0aGlzKS5wYXJlbnQoKS5oYXNDbGFzcygndmlkZW8tLWxvY2FsJykpIHtcbiAgICAkKHRoaXMpLnBhcmVudCgpLmZpbmQoJ3ZpZGVvJykudHJpZ2dlcigncGxheScpO1xuICB9IGVsc2Uge1xuICAgICQodGhpcykucGFyZW50KCkuYXBwZW5kKGA8aWZyYW1lIHdpZHRoPVwiNTcwXCIgaGVpZ2h0PVwiMjg1XCIgc3JjPVwiaHR0cHM6Ly93d3cueW91dHViZS5jb20vZW1iZWQvJHtJRH0/YXV0b3BsYXk9MVwiIGZyYW1lYm9yZGVyPVwiMFwiIGFsbG93PVwiYWNjZWxlcm9tZXRlcjsgYXV0b3BsYXk7IGVuY3J5cHRlZC1tZWRpYTsgZ3lyb3Njb3BlOyBwaWN0dXJlLWluLXBpY3R1cmVcIiBhbGxvd2Z1bGxzY3JlZW4pPmApO1xuICB9XG4gICQodGhpcykuaGlkZSgpO1xufSk7XG5cbi8vIGxvYWQgbG9jYWwgdmlkZW9cbiQoZG9jdW1lbnQpLnJlYWR5KCgpID0+IHtcbiAgY29uc3QgVVJMID0gJCgnLnZpZGVvLS1sb2NhbCcpLmF0dHIoJ2RhdGEtdXJsJyk7XG4gICQoJy52aWRlby0tbG9jYWwnKS5hcHBlbmQoYDx2aWRlbyB3aWR0aD1cIjU3MFwiIGhlaWdodD1cIjI4NVwiIGNvbnRyb2xzPVwiXCIgY2xhc3M9XCJlbWJlZC1yZXNwb25zaXZlLWl0ZW1cIiBkYXRhLW1wND1cInRydWVcIiBpZD1cIm1hdXRpYy1wbGF5ZXItMFwiPlxuICAgIDxzb3VyY2Ugc3JjPSR7VVJMfSB0eXBlPVwidmlkZW8vbXA0XCI+XG4gIDwvdmlkZW8+YCk7XG59KTtcbiAgLy8gc2V0IGlucHV0IGZvY3VzIHN0eWxlc1xuJCgnLmlucHV0X19maWVsZCcpLm9uKCdmb2N1cycsIGZ1bmN0aW9uICgpIHtcbiAgJCh0aGlzKS5wYXJlbnQoKS5hZGRDbGFzcygnaW5wdXQtLWZvY3VzZWQnKTtcbn0pLm9uKCdibHVyJywgZnVuY3Rpb24gKCkge1xuICAkKHRoaXMpLnBhcmVudCgpLnJlbW92ZUNsYXNzKCdpbnB1dC0tZm9jdXNlZCcpO1xufSk7XG5cbi8vIHNldCBpbnB1dCBmaWxsZWQgc3R5bGVzXG4kKCcuaW5wdXRfX2ZpZWxkJykub24oJ2NoYW5nZScsIGZ1bmN0aW9uICgpIHtcbiAgJCh0aGlzKS52YWwoKSAhPT0gJycgPyAkKHRoaXMpLnBhcmVudCgpLmFkZENsYXNzKCdpbnB1dC0tZmlsbGVkJykgOiAkKHRoaXMpLnBhcmVudCgpLnJlbW92ZUNsYXNzKCdpbnB1dC0tZmlsbGVkJyk7XG59KTtcblxuLy8gYXBwbHkgbWFzayB0byBwaG9uZSBpbnB1dHNcbiQoJy5pbnB1dC0tdGVsIC5pbnB1dF9fZmllbGQnKS5pbnB1dG1hc2soJzggOTk5IDk5OSA5OSA5OScpO1xuXG4vLyBzaG93L2hpZGUgc2VuZCBjb2RlIGJ1dHRvbiBkZXBwZW5kaW5nIG9uIHBob25lIGlucHV0IHZhbHVlXG4kKCcuaW5wdXQtLXRlbCAuaW5wdXRfX2ZpZWxkJykub24oJ2lucHV0JywgZnVuY3Rpb24gKCkge1xuICBjb25zdCB2YWwgPSAkKHRoaXMpLnZhbCgpO1xuICBcbiAgaWYgKHZhbCAhPT0gJycgJiYgIS9fL2cudGVzdCh2YWwpKSB7XG4gICAgJCh0aGlzKS5zaWJsaW5ncygnLmpzLXNlbmQtdGVsJykucmVtb3ZlQXR0cignZGlzYWJsZWQnKTtcbiAgfSBlbHNlIHtcbiAgICAkKHRoaXMpLnNpYmxpbmdzKCcuanMtc2VuZC10ZWwnKS5hdHRyKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuICB9XG59KTtcblxuLy8gYXBwbHkgbWFzayB0byBjb2RlIGlucHV0c1xuJCgnLmlucHV0LS1jb2RlIC5pbnB1dF9fZmllbGQnKS5pbnB1dG1hc2soJzk5OTknKTtcblxuICAvLyBzZXQgc2VjdGlvbnMgbWVudGlvbmVkIGluIGhlYWRlclxuY29uc3Qgc2VjdGlvbnMgPSBbJCgnLnBhZ2Utd3JhcHBlcicpLCAkKCcud2h5JyksICQoJy5hYm91dCcpLCAkKCcuZmFxJyldO1xuXG4vLyBzZXQgY3VycmVudCBzZWN0aW9uXG5jb25zdCBzZXRMaW5rcyA9ICgpID0+IHtcbiAgc2VjdGlvbnMubWFwKGVsID0+IHtcbiAgICBjb25zdCB0b3BPZmZzZXQgPSBlbC5vZmZzZXQoKS50b3A7XG4gICAgaWYgKHRvcE9mZnNldCA8PSB3aW5kb3cuc2Nyb2xsWSArICQoJy5oZWFkZXInKS5pbm5lckhlaWdodCgpICsgMzApIHtcbiAgICAgICQoJy5oZWFkZXJfX2xpbmstLWN1cnJlbnQnKS5yZW1vdmVDbGFzcygnaGVhZGVyX19saW5rLS1jdXJyZW50Jyk7XG4gICAgICAkKGAuaGVhZGVyX19saW5rW2RhdGEtc2Nyb2xsPSR7ZWxbMF0uY2xhc3NMaXN0WzBdfV1gKS5hZGRDbGFzcygnaGVhZGVyX19saW5rLS1jdXJyZW50Jyk7XG4gICAgfVxuICB9KTtcbn07XG5cbi8vIHNldCBoZWFkZXIgYmFja2dyb3VuZFxuY29uc3Qgc2V0SGVhZGVyID0gKCkgPT4ge1xuICBpZiAod2luZG93LnNjcm9sbFkgPCA1MCkge1xuICAgICQoJy5oZWFkZXInKS5yZW1vdmVDbGFzcygnaGVhZGVyLS1iZycpO1xuICB9IGVsc2Uge1xuICAgICQoJy5oZWFkZXInKS5hZGRDbGFzcygnaGVhZGVyLS1iZycpO1xuICB9XG59O1xuXG4vLyBzZXQgb25jZSBwYWdlIGlzIGxvYWRlZFxuc2V0TGlua3MoKTtcblxuLy8gZnVuY3Rpb24gY2FsbCBmcmVxdWVuY3kgbGF0ZW5jeSBmb3IgYmV0dGVyIHBlcmZvbWFuY2VcbmNvbnN0IGRlYm91bmNlID0gKGZ1bmN0aW9uKCl7XG4gIHZhciB0aW1lciA9IDA7XG4gIHJldHVybiBmdW5jdGlvbihjYWxsYmFjaywgbXMpe1xuICAgIGNsZWFyVGltZW91dCh0aW1lcik7XG4gICAgdGltZXIgPSBzZXRUaW1lb3V0KGNhbGxiYWNrLCBtcyk7XG4gIH07XG59KSgpO1xuXG4vLyBzZXQgb24gcGFnZSBzY3JvbGxcbiQod2luZG93KS5vbignc2Nyb2xsJywgKCkgPT4ge1xuICBkZWJvdW5jZShzZXRMaW5rcywgMzAwKTtcblxuICBzZXRIZWFkZXIoKTtcbn0pO1xuXG5cbmxldCBoZWFkZXJNb2JpbGVTaG93biA9IGZhbHNlO1xuXG4vLyBzY3JvbGwgdG8gc3BlY2lmaWMgc2VjdGlvblxuJCgnLmpzLXNjcm9sbHRvJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICQoJ2JvZHknKS5jc3Moe1xuICAgICdwb3NpdGlvbic6ICdzdGF0aWMnLFxuICAgICdtYXJnaW4tdG9wJzogJzAnXG4gIH0pO1xuXG4gIGhlYWRlck1vYmlsZVNob3duID0gZmFsc2U7XG5cbiAgJCgnLmhlYWRlcl9fYnVyZ2VyJykucmVtb3ZlQ2xhc3MoJ2hlYWRlcl9fYnVyZ2VyLS1hY3RpdmUnKTtcbiAgJCgnLmhlYWRlcl9fbW9iaWxlJykucmVtb3ZlQ2xhc3MoJ2hlYWRlcl9fbW9iaWxlLS1hY3RpdmUnKTtcblxuICAkKFtkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsIGRvY3VtZW50LmJvZHldKS5hbmltYXRlKHtcbiAgICBzY3JvbGxUb3A6ICQoYC4keyQodGhpcykuYXR0cignZGF0YS1zY3JvbGwnKX1gKS5vZmZzZXQoKS50b3AgLSAkKCcuaGVhZGVyJykuaW5uZXJIZWlnaHQoKVxuICB9LCA1MDApO1xufSk7XG5cbi8vIGhhbmRsaW5nIG1vYmlsZSBtZW51XG4kKCcuaGVhZGVyX19idXJnZXInKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICQodGhpcykudG9nZ2xlQ2xhc3MoJ2hlYWRlcl9fYnVyZ2VyLS1hY3RpdmUnKTtcbiAgJCgnLmhlYWRlcl9fbW9iaWxlJykudG9nZ2xlQ2xhc3MoJ2hlYWRlcl9fbW9iaWxlLS1hY3RpdmUnKTtcblxuICBoZWFkZXJNb2JpbGVTaG93biA9ICFoZWFkZXJNb2JpbGVTaG93bjtcblxuICBpZiAoaGVhZGVyTW9iaWxlU2hvd24pIHtcbiAgICBzY3JvbGwgPSB3aW5kb3cuc2Nyb2xsWTtcbiAgICAkKCdib2R5JykuY3NzKHtcbiAgICAgICdwb3NpdGlvbic6ICdmaXhlZCcsXG4gICAgICAnbWFyZ2luLXRvcCc6IC1zY3JvbGxcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICAkKCdib2R5JykuY3NzKHtcbiAgICAgICdwb3NpdGlvbic6ICdzdGF0aWMnLFxuICAgICAgJ21hcmdpbi10b3AnOiAnMCdcbiAgICB9KTtcblxuICAgIHdpbmRvdy5zY3JvbGxUbygwLCBzY3JvbGwpO1xuICB9XG59KTtcbiAgLy8gc2V0IGhlcm8gc2VjdGlvbiBwYXJhbGxheFxuY29uc3Qgc2V0SGVybyA9ICgpID0+IHtcbiAgaWYgKHdpbmRvdy5zY3JvbGxZIDwgd2luZG93LmlubmVySGVpZ2h0KSB7XG4gICAgJCgnLmhlcm8nKS5jc3MoJ3RyYW5zZm9ybScsIGB0cmFuc2xhdGVZKCR7LXdpbmRvdy5zY3JvbGxZIC8gNX1weClgKVxuICB9XG59O1xuXG4vLyBzZXQgb25jZSBwYWdlIGlzIGxvYWRlZFxuc2V0SGVhZGVyKCk7XG5cbi8vIHNldCBvbiBwYWdlIHNjcm9sbFxuaWYgKHdpbmRvdy5pbm5lcldpZHRoID49IDEyMDApIHtcbiAgJCh3aW5kb3cpLm9uKCdzY3JvbGwnLCAoKSA9PiB7XG4gICAgc2V0SGVybygpO1xuICB9KTtcbn1cblxuLy8gc2Nyb2xsIHRvIGNhbGMgc2VjdGlvblxuJCgnLmpzLXNjcm9sbC1jYWxjJykub24oJ2NsaWNrJywgZSA9PiB7XG4gIGUucHJldmVudERlZmF1bHQoKTtcbiAgJChbZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LCBkb2N1bWVudC5ib2R5XSkuYW5pbWF0ZSh7XG4gICAgc2Nyb2xsVG9wOiAkKCcuY2FsYycpLm9mZnNldCgpLnRvcCAtICQoJy5oZWFkZXInKS5pbm5lckhlaWdodCgpIC0gMzBcbiAgfSwgNTAwKTtcbn0pO1xuXG4vLyB0b2dnbGUgaGVybyB2aWRlbyBwb3B1cFxuJCgnLmhlcm9fX3BsYXknKS5vbignY2xpY2snLCAoKSA9PiB7XG4gIHNjcm9sbCA9IHdpbmRvdy5zY3JvbGxZO1xuXG4gICQoJ2JvZHknKS5jc3Moe1xuICAgICdwb3NpdGlvbic6ICdmaXhlZCcsXG4gICAgJ21hcmdpbi10b3AnOiAtc2Nyb2xsXG4gIH0pO1xuXG4gICQoJy5oZXJvLXBvcHVwX193aW5kb3cnKS5hcHBlbmQoJzxpZnJhbWUgd2lkdGg9XCIxMDAlXCIgaGVpZ2h0PVwiMTAwJVwiIHNyYz1cImh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL2VtYmVkL292VU1WVmdNYURVP2F1dG9wbGF5PTFcIiBmcmFtZWJvcmRlcj1cIjBcIiBhbGxvdz1cImFjY2VsZXJvbWV0ZXI7IGF1dG9wbGF5OyBlbmNyeXB0ZWQtbWVkaWE7IGd5cm9zY29wZTsgcGljdHVyZS1pbi1waWN0dXJlXCIgYWxsb3dmdWxsc2NyZWVuKT4nKVxuICAkKCcuaGVyby1wb3B1cCcpLmZhZGVJbigzMDApO1xufSk7XG5cbi8vIGNsb3NlIGhlcm8gdmlkZW8gcG9wdXBcbiQoJy5oZXJvLXBvcHVwX19jbG9zZScpLm9uKCdjbGljaycsICgpID0+IHtcbiAgJCgnYm9keScpLmNzcyh7XG4gICAgJ3Bvc2l0aW9uJzogJ3N0YXRpYycsXG4gICAgJ21hcmdpbi10b3AnOiAnMCdcbiAgfSk7XG5cbiAgd2luZG93LnNjcm9sbFRvKDAsIHNjcm9sbCk7XG5cbiAgJCgnLmhlcm8tcG9wdXAnKS5mYWRlT3V0KDMwMCk7XG4gICQoJy5oZXJvLXBvcHVwIGlmcmFtZScpLnJlbW92ZSgpO1xufSk7XG4gIC8vIG51bWJlciBhbmltYXRpb24gZnVuY3Rpb25cbmNvbnN0IGFuaW1hdGVWYWx1ZSA9IChzZWxlY3Rvciwgc3RhcnQsIGVuZCwgZHVyYXRpb24sIHBlcmNlbnQgPSBmYWxzZSkgPT4ge1xuICBsZXQgY3VycmVudCA9IHN0YXJ0O1xuICBjb25zdCByYW5nZSA9IGVuZCAtIHN0YXJ0O1xuICBjb25zdCBpbmNyZW1lbnQgPSBlbmQgPiBzdGFydCA/IChyYW5nZSAvIGR1cmF0aW9uKSA6IChyYW5nZSAvIGR1cmF0aW9uKTtcbiAgY29uc3Qgc3RlcFRpbWUgPSBNYXRoLmFicyhNYXRoLmZsb29yKGR1cmF0aW9uIC8gcmFuZ2UpKTtcbiAgY29uc3QgdGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHtcbiAgICAgIGN1cnJlbnQgKz0gaW5jcmVtZW50O1xuICAgICAgJChzZWxlY3RvcikudGV4dChwZXJjZW50ID8gJzAsJyArIE1hdGguZmxvb3IoY3VycmVudCkudG9TdHJpbmcoKS5yZXBsYWNlKC9cXEIoPz0oXFxkezN9KSsoPyFcXGQpKS9nLCBcIiBcIikgKyAnJScgOiBNYXRoLmZsb29yKGN1cnJlbnQpLnRvU3RyaW5nKCkucmVwbGFjZSgvXFxCKD89KFxcZHszfSkrKD8hXFxkKSkvZywgXCIgXCIpKTtcbiAgICAgIGlmIChNYXRoLmZsb29yKGN1cnJlbnQpID09IGVuZCkge1xuICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXIpO1xuICAgICAgfVxuICB9LCBzdGVwVGltZSk7XG59O1xuXG4vLyBzZXQgd2hldGhlciBzcGVjaWZpYyAgaXRlbXMgYXJlIGFscmVhZHkgYW5pbWF0ZWRcbmxldCBkZXBvc2l0SXNBbmltYXRlZCA9IGZhbHNlO1xubGV0IHN0YXRzQXJlQW5pbWF0ZWQgPSBmYWxzZTtcblxuJCh3aW5kb3cpLm9uKCdzY3JvbGwnLCAoKSA9PiB7XG4gIC8vIGFuaW1hdGUgY2hhcnQgYXBwZWFyaW5nIHdoaWxlIHNjcm9sbGluZ1xuICBjb25zdCBjaGFydFRvcCA9ICQoJy5jYWxjX19jaGFydCcpLm9mZnNldCgpLnRvcDtcbiAgY29uc3Qgc2Nyb2xsV2l0aFdpbmRvdyA9IHdpbmRvdy5zY3JvbGxZICsgd2luZG93LmlubmVySGVpZ2h0O1xuICBpZiAoc2Nyb2xsV2l0aFdpbmRvdyA+PSBjaGFydFRvcCAmJiAod2luZG93LnNjcm9sbFkgLSB3aW5kb3cuaW5uZXJIZWlnaHQgLyAxLjUpIC8gMyA8PSAoY2hhcnRUb3AgKyB3aW5kb3cuaW5uZXJIZWlnaHQgLyAxLjUpIC8gMykge1xuICAgIGNvbnN0IHByb2dyZXNzID0gKChzY3JvbGxXaXRoV2luZG93KSAtIChjaGFydFRvcCArIHdpbmRvdy5pbm5lckhlaWdodCAvIDEuNSkpIC8gMztcbiAgICAkKCcuY2FsY19fY2hhcnQnKS5jc3MoJ3dpZHRoJywgKHByb2dyZXNzIDw9IDEwMCA/IHByb2dyZXNzIDogMTAwKSArICd2dycpXG4gIH1cblxuICAvLyBhbmltYXRlIGl0ZW1zIHdoZW4gdXNlciBzY3JvbGxlZCB0byB0aGVtXG4gIGlmICghZGVwb3NpdElzQW5pbWF0ZWQgJiYgc2Nyb2xsV2l0aFdpbmRvdyAtIDUwID49ICQoJy5jYWxjdWxhdG9yX190b3RhbCBzcGFuJykub2Zmc2V0KCkudG9wKSB7XG4gICAgYW5pbWF0ZVZhbHVlKCcuY2FsY3VsYXRvcl9fdG90YWwgc3BhbicsIDEwMDAwMCwgMCwgMjIpO1xuICAgIGRlcG9zaXRJc0FuaW1hdGVkID0gdHJ1ZTtcbiAgfVxuICBcbiAgaWYgKCFzdGF0c0FyZUFuaW1hdGVkICYmIHNjcm9sbFdpdGhXaW5kb3cgLSA1MCA+PSAkKCcuY2FsY19fc3RhdHMtY29sJykub2Zmc2V0KCkudG9wKSB7XG4gICAgYW5pbWF0ZVZhbHVlKCcuY2FsY19fc3RhdHMtY29sOm50aC1jaGlsZCgxKSAuY2FsY19fc3RhdHMtaGVhZCcsIDAsIDMzLCAzMywgdHJ1ZSk7XG4gICAgYW5pbWF0ZVZhbHVlKCcuY2FsY19fc3RhdHMtY29sOm50aC1jaGlsZCgyKSAuY2FsY19fc3RhdHMtaGVhZCcsIDAsIDE3ODksIDIwKTtcbiAgICBhbmltYXRlVmFsdWUoJy5jYWxjX19zdGF0cy1jb2w6bnRoLWNoaWxkKDMpIC5jYWxjX19zdGF0cy1oZWFkJywgMCwgMTE2NSwgMjApO1xuICAgIHN0YXRzQXJlQW5pbWF0ZWQgPSB0cnVlO1xuICB9XG59KTtcbiAgLy8gbWFzayBmb3IgZGVwb3NpdCBpbnB1dFxubmV3IEF1dG9OdW1lcmljKCcuY2FsY3VsYXRvcl9faW5wdXQgW25hbWU9XCJkZXBvc2l0XCJdJywge1xuICBhU2VwOiAnICcsXG4gIGRlY2ltYWxQbGFjZXM6IDBcbn0pO1xuXG4vLyBtYXNrIGZvciB0ZXJtIGlucHV0XG5uZXcgQXV0b051bWVyaWMoJy5jYWxjdWxhdG9yX19pbnB1dCBbbmFtZT1cInRlcm1cIl0nLCB7XG4gIGFTZXA6ICcgJyxcbiAgZGVjaW1hbFBsYWNlczogMFxufSk7XG5cbmxldCBkZXBvc2l0ID0gMDtcbmxldCB0ZXJtID0gMDtcbmxldCBwcm9maXQgPSAyLjU7XG5cbi8vIGNhbGN1bGF0ZSB0b3RhbCBkZXBvc2l0XG5jb25zdCBjYWxjdWxhdGUgPSAoKSA9PiB7XG4gIGNvbnN0IHZhbHVlID0gcGFyc2VJbnQoZGVwb3NpdCAqIChwcm9maXQgLyAxMDApICogMzAgKiB0ZXJtICsgZGVwb3NpdCk7XG4gICQoJy5jYWxjdWxhdG9yX190b3RhbCBzcGFuJykudGV4dCh2YWx1ZS50b1N0cmluZygpLnJlcGxhY2UoL1xcQig/PShcXGR7M30pKyg/IVxcZCkpL2csIFwiIFwiKSk7XG59O1xuXG4vLyByZWNhbGN1bGF0ZSB0b3RhbCBkZXBvc2l0IHdoZW4gdXNlciBjaGFuZ2UgZGF0YVxuJCgnLmNhbGN1bGF0b3JfX2lucHV0IGlucHV0Jykub24oJ2lucHV0JywgZnVuY3Rpb24gKCkge1xuICBpZiAoJCh0aGlzKS5hdHRyKCduYW1lJykgPT09ICdkZXBvc2l0Jykge1xuICAgIGRlcG9zaXQgPSArJCh0aGlzKS52YWwoKS5yZXBsYWNlKC8gL2csICcnKTtcbiAgfVxuICBpZiAoJCh0aGlzKS5hdHRyKCduYW1lJykgPT09ICd0ZXJtJykge1xuICAgIHRlcm0gPSArJCh0aGlzKS52YWwoKS5yZXBsYWNlKC8gL2csICcnKTtcbiAgfVxuXG4gIGNhbGN1bGF0ZSgpO1xufSk7XG5cbi8vIHJlY2FsY3VsYXRlIHRvdGFsIGRlcG9zaXQgd2hlbiB1c2VyIGNoYW5nZSBwcm9maXQgdmFsdWVcbiQoJy5qcy1yYW5nZScpLmlvblJhbmdlU2xpZGVyKHtcbiAgdHlwZTogJ3NpbmdsZScsXG4gIG1heDogNSxcbiAgbWluOiAwLFxuICBmcm9tOiAyLjUsXG4gIHN0ZXA6IDAuMSxcbiAgb25DaGFuZ2U6IGRhdGEgPT4ge1xuICAgIGNvbnN0IHZhbCA9IGRhdGEuaW5wdXRbMF0udmFsdWU7XG4gICAgcHJvZml0ID0gK3ZhbDtcbiAgICBjYWxjdWxhdGUoKTtcblxuICAgICQoJy5pcnMtc2luZ2xlJykuc2hvdygpO1xuICAgICQoJy5jYWxjdWxhdG9yX19ncmlkLWl0ZW0nKS5tYXAoZWwgPT4ge1xuICAgICAgaWYgKCt2YWwgPj0gK2VsKSB7XG4gICAgICAgICQoYC5jYWxjdWxhdG9yX19ncmlkLWl0ZW06ZXEoJHtlbH0pYCkuYWRkQ2xhc3MoJ2NhbGN1bGF0b3JfX2dyaWQtaXRlbS0tY2hlY2snKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICQoYC5jYWxjdWxhdG9yX19ncmlkLWl0ZW06ZXEoJHtlbH0pYCkucmVtb3ZlQ2xhc3MoJ2NhbGN1bGF0b3JfX2dyaWQtaXRlbS0tY2hlY2snKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcbiAgb25GaW5pc2g6ICgpID0+IHtcbiAgICAkKCcuaXJzLXNpbmdsZScpLmhpZGUoKTtcbiAgfVxufSk7XG4gIC8vIHNldCBmZWVkYmFjayBzbGlkZXIgb24gbW9iaWxlIGRldmljZXNcbmlmICgkKHdpbmRvdykuaW5uZXJXaWR0aCgpIDwgMTIwMCkge1xuICBjb25zdCBmZWVkYmFja1NsaWRlciA9IG5ldyBTd2lwZXIoJy5mZWVkYmFja19fZ3JpZCcsIHtcbiAgICBkaXJlY3Rpb246ICdob3Jpem9udGFsJyxcbiAgICBzcGVlZDogNTAwLFxuICAgIHdyYXBwZXJDbGFzczogJ2ZlZWRiYWNrX19yb3cnLFxuICAgIHNsaWRlQ2xhc3M6ICdmZWVkYmFja19fdmlkZW8nLFxuICAgIHNwYWNlQmV0d2VlbjogMzAsXG4gICAgbG9vcDogdHJ1ZSxcbiAgICBwYWdpbmF0aW9uOiB7XG4gICAgICBlbDogJy5mZWVkYmFja19fcGFnaW5hdGlvbicsXG4gICAgICBjbGlja2FibGU6IHRydWUsXG4gICAgfVxuICB9KTtcbn1cbiAgLy8gc2V0IHNsaWRlcnMgZGVwZW5kaW5nIG9uIGRldmljZVxuaWYgKCQod2luZG93KS5pbm5lcldpZHRoKCkgPCAxMjAwKSB7XG4gIGNvbnN0IHNsaWRlciA9IG5ldyBTd2lwZXIoJy5zbGlkZXJfX2NvbnRhaW5lcicsIHtcbiAgICBkaXJlY3Rpb246ICdob3Jpem9udGFsJyxcbiAgICBzcGVlZDogNTAwLFxuICAgIHdyYXBwZXJDbGFzczogJ3NsaWRlcl9fd3JhcHBlcicsXG4gICAgc2xpZGVDbGFzczogJ3NsaWRlcl9fc2xpZGUnLFxuICAgIHNwYWNlQmV0d2VlbjogMzAsXG4gICAgbG9vcDogdHJ1ZSxcbiAgICBzcGFjZUJldHdlZW46IDMwLFxuICAgIHBhZ2luYXRpb246IHtcbiAgICAgIGVsOiAnLnNsaWRlcl9fcGFnaW5hdGlvbicsXG4gICAgICBjbGlja2FibGU6IHRydWUsXG4gICAgfVxuICB9KTtcbn0gZWxzZSB7XG4gIGNvbnN0IHNsaWRlciA9IG5ldyBTd2lwZXIoJy5zbGlkZXJfX2NvbnRhaW5lcicsIHtcbiAgICBkaXJlY3Rpb246ICd2ZXJ0aWNhbCcsXG4gICAgc3BlZWQ6IDUwMCxcbiAgICB3cmFwcGVyQ2xhc3M6ICdzbGlkZXJfX3dyYXBwZXInLFxuICAgIHNsaWRlQ2xhc3M6ICdzbGlkZXJfX3NsaWRlJyxcbiAgICBzcGFjZUJldHdlZW46IDMwLFxuICAgIGxvb3A6IHRydWUsXG4gICAgYXV0b3BsYXk6IHtcbiAgICAgIGRlbGF5OiAzMDAwLFxuICAgICAgZGlzYWJsZU9uSW50ZXJhY3Rpb246IGZhbHNlLFxuICAgIH0sXG4gICAgcGFnaW5hdGlvbjoge1xuICAgICAgZWw6ICcuc2xpZGVyX19wYWdpbmF0aW9uJyxcbiAgICAgIGNsaWNrYWJsZTogdHJ1ZSxcbiAgICB9XG4gIH0pO1xufVxuICAvLyB0b2dnbGluZyBmYXEgaXRlbXNcbiQoJy5mYXEtaXRlbV9faGVhZCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgaWYgKCQodGhpcykuaGFzQ2xhc3MoJ2ZhcS1pdGVtX19oZWFkLS1vcGVuZWQnKSkge1xuICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2ZhcS1pdGVtX19oZWFkLS1vcGVuZWQnKTtcbiAgfSBlbHNlIHtcbiAgICAkKCcuZmFxLWl0ZW1fX2hlYWQtLW9wZW5lZCcpLm5leHQoKS5zbGlkZVVwKDMwMCk7XG4gICAgJCgnLmZhcS1pdGVtX19oZWFkLS1vcGVuZWQnKS5yZW1vdmVDbGFzcygnZmFxLWl0ZW1fX2hlYWQtLW9wZW5lZCcpO1xuICAgICQodGhpcykuYWRkQ2xhc3MoJ2ZhcS1pdGVtX19oZWFkLS1vcGVuZWQnKTtcbiAgfVxuICAkKHRoaXMpLm5leHQoKS5zbGlkZVRvZ2dsZSgzMDApO1xufSk7XG4gIC8vIHNob3cgcG9wdXBcbiQoJy5qcy1vcGVuLXBvcHVwJykub24oJ2NsaWNrJywgZSA9PiB7XG4gIGUucHJldmVudERlZmF1bHQoKTtcblxuICBzY3JvbGwgPSB3aW5kb3cuc2Nyb2xsWTtcblxuICAkKCdib2R5JykuY3NzKHtcbiAgICAncG9zaXRpb24nOiAnZml4ZWQnLFxuICAgICdtYXJnaW4tdG9wJzogLXNjcm9sbFxuICB9KTtcbiAgXG4gICQoJy5wb3B1cCcpLmZhZGVJbigzMDApO1xufSk7XG5cbi8vIGNsb3NlIHBvcHVwXG4kKCcucG9wdXBfX2Nsb3NlJykub24oJ2NsaWNrJywgKCkgPT4ge1xuICAkKCdib2R5JykuY3NzKHtcbiAgICAncG9zaXRpb24nOiAnc3RhdGljJyxcbiAgICAnbWFyZ2luLXRvcCc6ICcwJ1xuICB9KTtcblxuICB3aW5kb3cuc2Nyb2xsVG8oMCwgc2Nyb2xsKTtcblxuICAkKCcucG9wdXAnKS5mYWRlT3V0KDMwMCk7XG59KTtcblxuLy8gc2VuZCBwb3B1cCBmb3JtXG4kKCcuanMtc2VuZC10ZWwnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgJCh0aGlzKS5hdHRyKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuICAkKHRoaXMpLnNpYmxpbmdzKCcuaW5wdXRfX2ZpZWxkJykuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcbiAgJCgnLnBvcHVwX19jb2RlIGlucHV0JykucmVtb3ZlQXR0cignZGlzYWJsZWQnKTtcbiAgJCgnLmpzLXNlbmQtZm9ybScpLnJlbW92ZUF0dHIoJ2Rpc2FibGVkJyk7XG59KTtcblxufVxuIl19
